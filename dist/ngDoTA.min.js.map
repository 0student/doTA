{"version":3,"sources":["ngDoTA.js"],"names":["doTA","Q","h","c","g","b","indexOf","charAt","closeTag","substring","comment","e","f","p","d","k","a","q","m","u","slice","length","replace","toLowerCase","openTag","voidTag","text","console","error","N","ha","toUpperCase","H","document","getElementById","substr","setAttribute","String","prototype","trim","this","Object","watch","unwatch","G","diff","firstChild","nodeType","nodeValue","diff2","lastIndexOf","r","innerHTML","parentNode","replaceChild","insertBefore","createTextNode","appendChild","diff3","y","t","I","C","removeChild","getId","initCH","compile","match","da","aa","R","D","push","ba","ia","M","ca","W","loose","watchDiff","diffLevel","true","false","null","void","undefined","$index","S","F","$attr","X","K","Math","Date","Array","Infinity","NaN","var","in","x","z","P","L","dotaRender","n","key","ea","strip","encode","fa",">","<","w","B","v","skip","Y","E","Z","A","la","refresh","elif","T","exec","style","model","bind","value","ja","test","event","ga","U","id","J","expand","join","params","optimize","debug","log","Function","ka","createElement","module","exports","noop","time","timeEnd","forEach","call","split","reduce","splice","assign","apply","arguments","clearTimeout","setTimeout","hidden","nextSibling","target","srcElement","returnValue","cancelBubble","preventDefault","stopPropagation","$evalAsync","$event","querySelectorAll","getElementsByClassName","l","de","attributes","name","events","ded","getAttribute","type","addEventListener","$applyAsync","documentMode",1,"debounce","throttle","config","factory","addEvents","addNgModels","directive","restrict","priority","terminal","controller","link","$on","pop","$watchCollection","contentDocument","childNodes","attr","element","$destroy","$new","replaceWith","O","hasChildNodes","get","cache","success","cacheDom","scope","ngController","compileAll","dotaOnload","dotaOnloadScope","loaded","inline","V","removeAttribute","cloneNode","$eval","$scope","controllerAs","data","children","dotaInclude","html","contents","$watch","dotaTemplate","window","angular"],"mappings":"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","file":"ngDoTA.min.js","sourcesContent":["var doTA = (function() {'use strict';\n\t/* for ie8 */\n\tif (!String.prototype.trim) {\n\t\tString.prototype.trim = function() {\n\t\t\treturn this.replace(/^\\s+|\\s+$/g,'');\n\t\t};\n\t}\n\n\t/* no, thanks! firefox */\n\tif (Object.prototype.watch) {\n\t\tdelete Object.prototype.watch;\n\t\tdelete Object.prototype.unwatch;\n\t}\n\n\tvar doTA = {\n\t\tdiff: diff1,\n\t\tdiff2: diff2,\n\t\tdiff3: diff3,\n\t\tgetId: getUniqueId,\n\t\tinitCH: initCompileHash,\n\t\tcompile: compileHTML,\n\t\t// PS: parseStyle,\n\t\tC: {}, //Cached compiled functions\n\t\tD: {}, //Cached DOM to be used by ngDoTA, needed here to prevent unneccessary rendering\n\t\tH: {} //HashMap for TextDiff\n\t};\n\n\t// pretty indent for debugging\n\tfunction indent(n, x) {\n\t\tvar ret = new Array(n + 2).join('\t\t');\n\t\treturn x ? ret.slice(0, -2 * x) : ret;\n\t}\n\n\t// decode html entities\n\tfunction decodeEntities(text) {\n\t\treturn text.indexOf('&') < 0 ? text : text\n\t\t\t.replace(/&gt;/g, '>').replace(/&lt;/g, '<')\n\t\t\t.replace(/&amp;/g, '&').replace(/&quot;/g, '\"');\n\t}\n\n\t// parse attributes from html open tag and make dict object\n\tfunction parseAttr(chunk, func) {\n\t\tvar attr = {}, tagName;\n\t\tvar pos = chunk.indexOf(' ');\n\t\tvar spPos;\n\t\tvar len, attrName, attrVal;\n\t\tvar valStart, valEndPos;\n\n\t\tif (pos !== -1) {\n\t\t\ttagName = chunk.slice(0, pos);\n\t\t\tlen = chunk.length;\n\n\t\t\t//console.log(222, [pos, chunk]);\n\t\t\twhile (++pos < len) {\n\t\t\t\tvar eqPos = chunk.indexOf('=', pos);\n\t\t\t\t// console.log('chunk', [chunk, pos, eqPos, chunk.slice(pos)]);\n\n\t\t\t\t// ** attribute without value (last attribute) **\n\t\t\t\tif (eqPos === -1) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tspPos = chunk.indexOf(' ', pos);\n\t\t\t\t\t\tif (spPos > 0) {\n\t\t\t\t\t\t\tattrName = chunk.slice(pos, spPos);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tattrName = chunk.slice(pos);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// console.log('eqPos === -1', [attrName, pos, chunk])\n\t\t\t\t\t\tif (attrName !== '/') {\n\t\t\t\t\t\t\tattr[attrName] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos = spPos + 1;\n\n\t\t\t\t\t} while (spPos > 0);\n\t\t\t\t\t//attr required will be required=\"\", while is valid syntax\n\t\t\t\t\t//http://www.w3.org/TR/html-markup/syntax.html#syntax-attr-empty\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\n\t\t\t\tspPos = chunk.indexOf(' ', pos);\n\t\t\t\t// console.log('chunk', [chunk, eqPos, pos, spPos, chunk.slice(pos, spPos)]);\n\n\t\t\t\tif (spPos > 0 && spPos < eqPos) {\n\t\t\t\t\tattr[chunk.slice(pos, spPos)] = \"\";\n\t\t\t\t\tpos = spPos;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t//console.log(33, [eqPos]);\n\t\t\t\tattrName = chunk.slice(pos, eqPos);\n\t\t\t\t//console.log(331, [attrName]);\n\n\t\t\t\tvalStart = chunk[eqPos + 1];\n\t\t\t\t//console.log(332, [valStart]);\n\n\t\t\t\t//if attribute value is start with quote\n\t\t\t\tif (valStart === '\"' || valStart === \"'\") {\n\t\t\t\t\tvalEndPos = chunk.indexOf(valStart, eqPos + 2);\n\t\t\t\t\tif (valEndPos < 0) { throw 'ERR:Invalid HTML: [' + chunk + ']'; }\n\n\t\t\t\t\tattrVal =\tchunk.slice(eqPos + 2, valEndPos);\n\t\t\t\t\tattr[attrName] =0>attrVal.indexOf(\"&\")?attrVal:attrVal.replace(/&gt;/g,\">\").replace(/&lt;/g,\"<\").replace(/&amp;/g,\"&\").replace(/&quot;/g,'\"'); //INLINE;\n\t\t\t\t\tpos = valEndPos + 1;\n\t\t\t\t\t//console.log(311, [valEndPos, attrName, attrVal]);\n\t\t\t\t} else {\n\n\t\t\t\t\tvalEndPos = chunk.indexOf(' ', eqPos + 2);\n\n\t\t\t\t\t//when no more attributes\n\t\t\t\t\tif (valEndPos < 0) {\n\t\t\t\t\t\tattrVal =\tchunk.slice(eqPos + 1);\n\t\t\t\t\t\tattr[attrName] =0>attrVal.indexOf(\"&\")?attrVal:attrVal.replace(/&gt;/g,\">\").replace(/&lt;/g,\"<\").replace(/&amp;/g,\"&\").replace(/&quot;/g,'\"'); //INLINE;\n\t\t\t\t\t\t//console.log(442, [attrVal]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tattrVal =\tchunk.slice(eqPos + 1, valEndPos);\n\t\t\t\t\t\tattr[attrName] =0>attrVal.indexOf(\"&\")?attrVal:attrVal.replace(/&gt;/g,\">\").replace(/&lt;/g,\"<\").replace(/&amp;/g,\"&\").replace(/&quot;/g,'\"'); //INLINE;\n\t\t\t\t\t\t//console.log(313, [eqPos, valEndPos, attrVal]);\n\t\t\t\t\t\tpos = valEndPos;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttagName = tagName.toLowerCase();\n\t\t\tif (tagName === 'input' || tagName === 'img') {\n\t\t\t\t//http://www.w3.org/TR/html-markup/syntax.html\n\t\t\t\t//area, base, br, col, command, embed, hr, img, input, keygen, link, meta, param, source, track, wbr\n\t\t\t\tfunc.openTag(tagName, attr, 1);\n\t\t\t\tfunc.voidTag();\n\t\t\t} else if (attrName === '/') {\n\t\t\t\tfunc.openTag(tagName, attr);\n\t\t\t\tfunc.closeTag(tagName);\n\t\t\t} else {\n\t\t\t\tfunc.openTag(tagName, attr);\n\t\t\t}\n\n\t\t// no attributes\n\t\t} else {\n\n\t\t\t// self closing, explicit\n\t\t\tif (chunk.charAt(chunk.length - 1) === '/') {\n\t\t\t\ttagName = chunk.slice(0, -1).toLowerCase();\n\n\t\t\t\tif (tagName === 'br' || tagName === 'hr') {\n\t\t\t\t\tfunc.openTag(tagName, attr, 1);\n\t\t\t\t\tfunc.voidTag();\n\t\t\t\t} else {\n\t\t\t\t\tfunc.openTag(tagName, attr);\n\t\t\t\t\tfunc.closeTag(tagName);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttagName = chunk.toLowerCase();\n\n\t\t\t\t// self closing, implicit\n\t\t\t\tif (tagName === 'br' || tagName === 'hr') {\n\t\t\t\t\tfunc.openTag(tagName, attr, 1);\n\t\t\t\t\tfunc.voidTag();\n\t\t\t\t} else {\n\t\t\t\t\tfunc.openTag(tagName, attr);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tvar events = ' scroll change click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste ';\n\tvar valid_chr = '_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n\t// minimal stripped down html parser\n\tfunction parseHTML(html, func) {\n\t\tif (!html) { return; }\n\t\tvar prevPos = 0, pos = html.indexOf('<');\n\t\tdo {\n\t\t\tif (html.charAt(pos) === '<') {\n\t\t\t\tpos++;\n\t\t\t\tif (html.charAt(pos) === '/') {\n\t\t\t\t\tprevPos = ++pos;\n\t\t\t\t\tpos = html.indexOf('>', prevPos);\n\t\t\t\t\t//close tag must be like </div>, but not <div />\n\t\t\t\t\t// console.log(['closetag', prevPos, pos, html.substring(prevPos, pos)])\n\t\t\t\t\tfunc.closeTag(html.substring(prevPos, pos));\n\t\t\t\t} else if (html.charAt(pos) === '!') {\n\t\t\t\t\tprevPos = pos;\n\t\t\t\t\tpos = html.indexOf('>', prevPos);\n\t\t\t\t\t// console.log(['comment', prevPos, pos, html.substring(prevPos, pos)])\n\t\t\t\t\tfunc.comment(html.substring(prevPos, pos));\n\t\t\t\t} else {\n\t\t\t\t\tprevPos = pos;\n\t\t\t\t\tpos = html.indexOf('>', prevPos);\n\t\t\t\t\t// console.log(['opentag', prevPos, pos, html.substring(prevPos, pos), parseAttr(html.substring(prevPos, pos))])\n\t\t\t\t\t// func.openTag.apply(this, parseAttr(html.substring(prevPos, pos)));\n\t\t\t\t\tparseAttr(html.substring(prevPos, pos), func);\n\t\t\t\t}\n\t\t\t} else if (html.charAt(pos) === '>') { //&& html.charAt(pos + 1) !== '<'\n\t\t\t\tprevPos = ++pos;\n\t\t\t\tpos = html.indexOf('<', prevPos);\n\t\t\t\tif (pos > prevPos) {\n\t\t\t\t\t// console.log(['text', prevPos, pos, html.substring(prevPos, pos)])\n\t\t\t\t\tfunc.text(html.substring(prevPos, pos));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (prevPos === 0 && pos < 0 && html) {\n\t\t\t\t\tfunc.text(html);\n\t\t\t\t} else {\n\t\t\t\t\t/** */console.error('Parse ERR?', [prevPos, pos, html, html.substring(prevPos, pos), html.slice(pos)]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t} while (pos > 0);\n\t}\n\n\t//diff and patch dom with exact same structure\n\tfunction diff1(prevKey, html2) {\n\t\tvar html1 = doTA.H[prevKey];\n\t\tvar prevPos1 = 0, pos1 = html1.indexOf('<');\n\t\tvar prevPos2 = 0, pos2 = html2.indexOf('<');\n\t\tvar tagId = '', elem, part1, part2;\n\t\tvar posx, endPosx;\n\n\t\tdo {\n\t\t\tif (html1.charAt(pos1) === \"<\") {\n\t\t\t\tpos1++;\n\t\t\t\tpos2++;\n\t\t\t\tif (html1.charAt(pos1) === \"/\" || html1.charAt(pos1) === \"!\") {\n\t\t\t\t\t//don't patch comment node and close tag.\n\t\t\t\t\tpos1 = html1.indexOf('>', pos1);\n\t\t\t\t\tpos2 = html2.indexOf('>', pos2);\n\t\t\t\t} else {\n\t\t\t\t\tprevPos1 = pos1;\n\t\t\t\t\tprevPos2 = pos2;\n\t\t\t\t\tpos1 = html1.indexOf('>', prevPos1);\n\t\t\t\t\tpos2 = html2.indexOf('>', prevPos2);\n\t\t\t\t\tpart1 = html1.substring(prevPos1, pos1);\n\t\t\t\t\tpart2 = html2.substring(prevPos2, pos2);\n\t\t\t\t\t//attributes\n\t\t\t\t\tif (part1 !== part2) {\n\t\t\t\t\t\t// console.log('openTag', [part1, part2])\n\t\t\t\t\t\ttagId = parsePatchAttr(part1, part2);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//record id\n\t\t\t\t\t\t//tagId = getTagId(part1);\n\t\t\t\t\t\tposx = part1.indexOf(' id=\"');\n\t\t\t\t\t\t0 <= posx && (posx += 5, endPosx = part1.indexOf('\"', posx), tagId = part1.substring(posx, endPosx)); //jshint ignore: line\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t//text node\n\t\t\t} else if (html1.charAt(pos1) === '>') {\n\t\t\t\tprevPos1 = ++pos1;\n\t\t\t\tprevPos2 = ++pos2;\n\n\t\t\t\tpos1 = html1.indexOf('<', prevPos1);\n\t\t\t\tpos2 = html2.indexOf('<', prevPos2);\n\t\t\t\t//textNode, only support firstChild here\n\t\t\t\tif (pos2 > prevPos2) {\n\t\t\t\t\tvar text1 = html1.substring(prevPos1, pos1);\n\t\t\t\t\tvar text2 = html2.substring(prevPos2, pos2);\n\t\t\t\t\tif (text1 !== text2) {\n\t\t\t\t\t\telem = document.getElementById(tagId);\n\t\t\t\t\t\tif (elem) {\n\t\t\t\t\t\t\tif (elem.firstChild && elem.firstChild.nodeType === 3) {\n\t\t\t\t\t\t\t\t// console.log('textApplied', [text1, text2]);\n\t\t\t\t\t\t\t\telem.firstChild.nodeValue = text2;\n\t\t\t\t\t\t\t} //else to log something?\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('tag not found', [tagId]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} while(pos1 > 0);\n\t}\n\n\t// find position of outerHTML end\n\t// this function will be inline during building\n\tfunction getOuterHTMLEnd(HTML, START_POS) {\n\t\tvar LVL = 1, POS = START_POS;\n\t\tfor(;;) {\n\t\t\tPOS = HTML.indexOf('>', POS);\n\t\t\tif (HTML.charAt(POS - 1) === '/') { //self closing\n\t\t\t\tLVL--;\n\t\t\t\tif (LVL <= 0) break;\n\t\t\t}\n\t\t\tPOS = HTML.indexOf('<', POS);\n\t\t\tif (HTML.charAt(POS + 1) === '/') {\n\t\t\t\tLVL--;\n\t\t\t\tif (LVL <= 0) {\n\t\t\t\t\tPOS = HTML.indexOf('>', POS + 2);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (HTML.charAt(POS + 1) !== '!') {\n\t\t\t\tLVL++;\n\t\t\t}\n\t\t\t// console.log('LVL', LVL);\n\t\t}\n\n\t\t// console.log('getOutHTML', tagName, [tagName, pos2, pos2, ])\n\t\treturn ++POS;\n\t}\n\n\t//less memory usage with this, javascript is single threaded anyway\n\tvar newNode = typeof document !== 'undefined' && document.createElement('div');\n\n\t// FlatDOM: diff html as text and patch dom nodes\n\tfunction diff2(prevKey, html2) {\n\t\tvar html1 = doTA.H[prevKey];\n\t\tvar prevPos1 = 0, pos1 = html1.indexOf('<');\n\t\tvar prevPos2 = 0, pos2 = html2.indexOf('<');\n\t\tvar tagId1, tagId2, elem1, part1, part2;\n\t\t// var tagNo1 = 0, tagNo2 = 0;\n\t\tvar tagStartPos1, tagStartPos2;\n\t\tvar LVL; //this is needed for fnInline\n\t\t// console.log(html1);\n\t\t// console.log(html2);\n\n\t\tfor (;;) {\n\t\t\t// console.log('before', [dirty1, dirty2], [tagId1, tagId2], [html1.substr(pos1, 20), html2.substr(pos2, 20)]);\n\n\t\t\tif (pos1 >= 0) {\n\t\t\t\tpos1 = html1.indexOf(' id=\"', pos1);\n\t\t\t\tif (pos1 > 0) {\n\t\t\t\t\tprevPos1 = pos1 + 5;\n\t\t\t\t\tpos1 = html1.indexOf('\"', prevPos1);\n\t\t\t\t\ttagId1 = html1.substring(prevPos1, pos1);\n\t\t\t\t\t// tagNo1 = tagId1^0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log('middle', [tagId1, tagId2], [html1.substr(pos1, 20), html2.substr(pos2, 20)]);\n\n\t\t\tif (pos2 >= 0) {\n\t\t\t\tpos2 = html2.indexOf(' id=\"', pos2);\n\t\t\t\tif (pos2 > 0) {\n\t\t\t\t\tprevPos2 = pos2 + 5;\n\t\t\t\t\tpos2 = html2.indexOf('\"', prevPos2);\n\t\t\t\t\ttagId2 = html2.substring(prevPos2, pos2);\n\t\t\t\t\t// tagNo2 = tagId2^0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log('after', [dirty1, dirty2], [tagId1, tagId2],\n\t\t\t//\t [pos1, pos2], [html1.substr(pos1, 20), html2.substr(pos2, 20)]);\n\n\t\t\t//exist inifite loop\n\t\t\tif (pos1 < 0 || pos2 < 0) break;\n\n\t\t\t//same node\n\t\t\tif (tagId1 === tagId2) {\n\t\t\t\ttagStartPos1 = ++pos1;\n\t\t\t\tpos1 = html1.indexOf('>', pos1);\n\t\t\t\tpart1 = html1.substring(tagStartPos1, pos1);\n\n\t\t\t\ttagStartPos2 = ++pos2;\n\t\t\t\tpos2 = html2.indexOf('>', pos2);\n\t\t\t\tpart2 = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t// console.log('same node', [part1, part2]);\n\n\t\t\t\t//attr really different\n\t\t\t\tif (part1 !== part2) {\n\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\tif (elem1) {\n\t\t\t\t\t\t//nodes to be inserted or deleted\n\t\t\t\t\t\tif ((part1.substr(1, 6) === 'hidden') !== (part2.substr(1, 6) === 'hidden')) {\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\t// tagStartPos1 = html1.lastIndexOf('<', pos1 - 6);\n\t\t\t\t\t\t\t// console.warn('replaceChild', [tagId2, tagId1], [\n\t\t\t\t\t\t\t//\t html2.substring(tagStartPos2, getOuterHTMLEnd(html2, tagStartPos2)),\n\t\t\t\t\t\t\t//\t html1.substring(tagStartPos1, getOuterHTMLEnd(html1, pos1))]);\n\n\t\t\t\t\t\t\telem1.parentNode.replaceChild(newNode.firstChild, elem1);\n\n\t\t\t\t\t\t\tLVL=1,pos1=pos1;for(;;){pos1=html1.indexOf(\">\",pos1);if(\"/\"===html1.charAt(pos1-1)&&(LVL--,0>=LVL))break;pos1=html1.indexOf(\"<\",pos1);if(\"/\"===html1.charAt(pos1+1)){if(LVL--,0>=LVL){pos1=html1.indexOf(\">\",pos1+2);break}}else\"!\"!==html1.charAt(pos1+1)&&LVL++}pos1++; //INLINE\n\n\t\t\t\t\t\t//only attribute changes\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsePatchAttr(part1, part2, elem1);\n\t\t\t\t\t\t\t// console.warn('patch node', [tagId1, tagId2], [pos1, pos2], [tagStartPos1, tagStartPos2], [part1, part2])\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('elem not found', [tagId1, tagId2], [part1, part2]);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//clear node for textNode\n\t\t\t\t\telem1 = void 0;\n\t\t\t\t}\n\n\t\t\t\t//if blank text node, skip early\n\t\t\t\tif (html1.charAt(pos1 + 1) === '<' && html2.charAt(pos2 + 1) === '<') {\n\t\t\t\t\tpos1++;\n\t\t\t\t\tpos2++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tprevPos1 = pos1;\n\t\t\t\tpos1 = html1.indexOf('<', prevPos1);\n\t\t\t\tpart1 = html1.substring(prevPos1 + 1, pos1);\n\t\t\t\tprevPos2 = pos2;\n\t\t\t\tpos2 = html2.indexOf('<', prevPos2);\n\t\t\t\tpart2 = html2.substring(prevPos2 + 1, pos2);\n\n\t\t\t\t//for text node really diff\n\t\t\t\tif (part1 !== part2) {\n\t\t\t\t\t// console.log('text diff', [tagId1, tagId2], [part1, part2]);\n\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\t\tconsole.error('node not found', [tagId1, tagId2], [part1, part2], [html1.substr(pos1, 15), html2.substr(pos2, 15)], [html1, html2]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// console.log('part1,2', [part1, part2]);\n\t\t\t\t\tif (elem1.firstChild) {\n\t\t\t\t\t\t//overwrite textNode value\n\t\t\t\t\t\tif (elem1.firstChild.nodeType === 3) {\n\t\t\t\t\t\t\telem1.firstChild.nodeValue = part2;\n\t\t\t\t\t\t\t// console.warn('textNode overwritten', elem1, elem1.firstChild)\n\n\t\t\t\t\t\t//not textNode, so, insertBefore\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telem1.insertBefore(document.createTextNode(part2), elem1.firstChild);\n\t\t\t\t\t\t\t// console.warn('textNode inserted', elem1, elem1.firstChild)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t//no childNodes, so append one\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem1.appendChild(document.createTextNode(part2));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error(\"different Id - not supported for now!\", [tagId1, tagId2]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} //infinite loop\n\n\t}\n\n\t// diff3: no place holder nodes\n\tfunction diff3(prevKey, html2) {\n\t\tvar html1 = doTA.H[prevKey];\n\t\tvar part1, part2, elem1;\n\t\tvar prevPos1, lastPos1, pos1 = html1.indexOf('<');\n\t\tvar prevPos2, lastPos2, pos2 = html2.indexOf('<');\n\t\tvar tagId1, tagId2, prevTagId1, prevTagId2;\n\t\tvar tagNo1, tagNo2, subNo1, subNo2, dotPos1, dotPos2;\n\t\tvar tagStartPos1, tagStartPos2;\n\t\tvar LVL; // jshint ignore:line\n\t\t// console.log(html1);\n\t\t// console.log(html2);\n\t\t// var logger = [];\n\n\t\tfor (;;) {\n\t\t\t// console.log('before', [dirty1, dirty2], [tagId1, tagId2], [html1.substr(pos1, 20), html2.substr(pos2, 20)]);\n\n\t\t\tif (pos1 >= 0) {\n\t\t\t\tlastPos1 = pos1;\n\t\t\t\tpos1 = html1.indexOf(' id=\"', pos1);\n\t\t\t\tif (pos1 > 0) {\n\t\t\t\t\tprevPos1 = pos1 + 5;\n\t\t\t\t\tpos1 = html1.indexOf('\"', prevPos1);\n\t\t\t\t\tprevTagId1 = tagId1;\n\t\t\t\t\ttagId1 = html1.substring(prevPos1, pos1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log('middle', [tagId1, tagId2], [html1.substr(pos1, 20), html2.substr(pos2, 20)]);\n\n\t\t\tif (pos2 >= 0) {\n\t\t\t\tlastPos2 = pos2;\n\t\t\t\tpos2 = html2.indexOf(' id=\"', pos2);\n\t\t\t\tif (pos2 > 0) {\n\t\t\t\t\tprevPos2 = pos2 + 5;\n\t\t\t\t\tpos2 = html2.indexOf('\"', prevPos2);\n\t\t\t\t\tprevTagId2 = tagId2;\n\t\t\t\t\ttagId2 = html2.substring(prevPos2, pos2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log('after', [dirty1, dirty2], [tagId1, tagId2],\n\t\t\t//\t [pos1, pos2], [html1.substr(pos1, 20), html2.substr(pos2, 20)]);\n\n\t\t\t//exist infinite loop\n\t\t\tif (pos1 < 0 && pos2 < 0) break;\n\n\t\t\t//same node\n\t\t\tif (tagId1 === tagId2) {\n\t\t\t\ttagStartPos1 = ++pos1;\n\t\t\t\tpos1 = html1.indexOf('>', pos1);\n\t\t\t\tpart1 = html1.substring(tagStartPos1, pos1);\n\n\t\t\t\ttagStartPos2 = ++pos2;\n\t\t\t\tpos2 = html2.indexOf('>', pos2);\n\t\t\t\tpart2 = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t// console.log('same node', [part1, part2]);\n\n\t\t\t\t//attr really different\n\t\t\t\tif (part1 !== part2) {\n\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\tif (elem1) {\n\t\t\t\t\t\t//nodes to be inserted or deleted\n\t\t\t\t\t\tif ((part1.substr(1, 6) === 'hidden') !== (part2.substr(1, 6) === 'hidden')) {\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\t// tagStartPos1 = html1.lastIndexOf('<', pos1 - 6);\n\t\t\t\t\t\t\t// console.warn('replaceChild', [tagId2, tagId1], [\n\t\t\t\t\t\t\t//\t html2.substring(tagStartPos2, getOuterHTMLEnd(html2, tagStartPos2)),\n\t\t\t\t\t\t\t//\t html1.substring(tagStartPos1, getOuterHTMLEnd(html1, pos1))]);\n\n\t\t\t\t\t\t\telem1.parentNode.replaceChild(newNode.firstChild, elem1);\n\n\t\t\t\t\t\t\tLVL=1,pos1=pos1;for(;;){pos1=html1.indexOf(\">\",pos1);if(\"/\"===html1.charAt(pos1-1)&&(LVL--,0>=LVL))break;pos1=html1.indexOf(\"<\",pos1);if(\"/\"===html1.charAt(pos1+1)){if(LVL--,0>=LVL){pos1=html1.indexOf(\">\",pos1+2);break}}else\"!\"!==html1.charAt(pos1+1)&&LVL++}pos1++; //INLINE\n\n\t\t\t\t\t\t//only attribute changes\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsePatchAttr(part1, part2, elem1);\n\t\t\t\t\t\t\t// console.warn('patch node', [tagId1, tagId2], [pos1, pos2], [tagStartPos1, tagStartPos2], [part1, part2])\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('elem not found', [tagId1, tagId2], [part1, part2]);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//clear node for textNode\n\t\t\t\t\telem1 = void 0;\n\t\t\t\t}\n\n\t\t\t\t//if blank text node, skip early\n\t\t\t\tif (html1.charAt(pos1 + 1) === '<' && html2.charAt(pos2 + 1) === '<') {\n\t\t\t\t\tpos1++;\n\t\t\t\t\tpos2++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tprevPos1 = pos1;\n\t\t\t\tpos1 = html1.indexOf('<', prevPos1);\n\t\t\t\tpart1 = html1.substring(prevPos1 + 1, pos1);\n\t\t\t\tprevPos2 = pos2;\n\t\t\t\tpos2 = html2.indexOf('<', prevPos2);\n\t\t\t\tpart2 = html2.substring(prevPos2 + 1, pos2);\n\n\t\t\t\t//for text node really diff\n\t\t\t\tif (part1 !== part2) {\n\t\t\t\t\t// console.log('text diff', [tagId1, tagId2], [part1, part2]);\n\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\t\tconsole.error('node not found', [tagId1, tagId2], [part1, part2], [html1.substr(pos1, 15), html2.substr(pos2, 15)], [html1, html2]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// console.log('part1,2', [part1, part2]);\n\t\t\t\t\tif (elem1.firstChild) {\n\t\t\t\t\t\t//overwrite textNode value\n\t\t\t\t\t\tif (elem1.firstChild.nodeType === 3) {\n\t\t\t\t\t\t\telem1.firstChild.nodeValue = part2;\n\t\t\t\t\t\t\t// console.warn('textNode overwritten', elem1, elem1.firstChild)\n\n\t\t\t\t\t\t//not textNode, so, insertBefore\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telem1.insertBefore(document.createTextNode(part2), elem1.firstChild);\n\t\t\t\t\t\t\t// console.warn('textNode inserted', elem1, elem1.firstChild)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t//no childNodes, so append one\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem1.appendChild(document.createTextNode(part2));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t//when id is different\n\t\t\t} else {\n\n\t\t\t\tdotPos1 = tagId1.indexOf('.');\n\t\t\t\ttagNo1 = tagId1.slice(0, dotPos1) ^ 0;\n\t\t\t\tdotPos2 = tagId1.indexOf('.', ++dotPos1);\n\t\t\t\tsubNo1 = dotPos2 > 0 && tagId1.slice(dotPos1, dotPos2) ^ 0;\n\n\t\t\t\tdotPos2 = tagId2.indexOf('.');\n\t\t\t\ttagNo2 = tagId2.slice(0, dotPos2) ^ 0;\n\t\t\t\tdotPos1 = tagId2.indexOf('.', ++dotPos2);\n\t\t\t\tsubNo2 = dotPos1 > 0 && tagId2.slice(dotPos2, dotPos1) ^ 0;\n\n\t\t\t\tif (prevTagId1 === prevTagId2 && pos1 > 0 && pos2 > 0) {\n\n\t\t\t\t\t//[\"6.1\", \"5.7.1\"] [\"5.6.1\", \"5.6.1\"]\n\t\t\t\t\t//horizontal scroll left to right, appending nodes\n\t\t\t\t\tif (tagNo1 > tagNo2) {\n\n\t\t\t\t\t\t//removeChild bottom down 111.1 [\"111.1\", \"16.1\"] [\"15.6.1\", \"15.6.1\"] [10070, 2106]\n\t\t\t\t\t\tif (subNo2) {\n\t\t\t\t\t\t\t//[\"146.1\", \"145.12681.1\"] [\"145.1\", \"145.1\"] [\"<div id=\"145.12681.1\" class=\"cell\" style=\"width:125px\" col=\"2536\">0.7734284962061793</div>\"]\n\t\t\t\t\t\t\t//[\"116.1\", \"115.12.1\"] [\"115.11.1\", \"115.11.1\"] [\"<div id=\"115.12.1\" class=\"cell\" style=\"width:125px;\"></div>\"]\n\t\t\t\t\t\t\telem1 = document.getElementById(tagNo2 + '.' + prevKey);\n\t\t\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\t\t\t//resize bottom down - bigger\n\t\t\t\t\t\t\t\t//[111, 15] [false, false] [\"111.1\", \"15.1\"] [\"14.6.1\", \"14.6.1\"] [1896, 1871]\n\t\t\t\t\t\t\t\tconsole.error(\"no existing node 5\", [tagId1, tagId2], [prevTagId1, prevTagId2], [subNo1, subNo2], [pos1, pos2]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\t\telem1.appendChild(newNode.firstChild);\n\t\t\t\t\t\t\t\t// console.info(\"prevTagId2.appendChild\", [tagId1, tagId2], [prevTagId1, prevTagId2], [html2.substring(tagStartPos2, pos2)]);\n\n\t\t\t\t\t\t\t\tpos1 = lastPos1;\n\t\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//not impl [\"111.1\", \"15.1\"] [\"14.6.1\", \"14.6.1\"] [1896, 1871]\n\t\t\t\t\t\t// [\"36.1\", \"111.1\"] [\"35.6.1\", \"35.6.1\"] [6872, 6897]\n\t\t\t\t\t\t} else if (!subNo1) { //&& !subNo2\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\telem1 = document.getElementById(prevTagId2.slice(0, prevTagId2.indexOf('.') + 1) + prevKey);\n\t\t\t\t\t\t\telem1.parentNode.appendChild(newNode.firstChild);\n\t\t\t\t\t\t\t// console.info(\"prevTagId2.parentNode.appendChild\", [tagId1, tagId2], [prevTagId1, prevTagId2], [subNo1, subNo2], [html2.substring(tagStartPos2, pos2)]);\n\n\t\t\t\t\t\t\tpos1 = lastPos1;\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"not impl\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// [5, 6] [24, false] [\"5.24.1\", \"6.1\"] [\"5.23.1\", \"5.23.1\"] [673, 770]\n\t\t\t\t\t} else if (tagNo1 < tagNo2) {\n\n\t\t\t\t\t\t// [5, 6] [24, false] [\"5.24.1\", \"6.1\"] [\"5.23.1\", \"5.23.1\"] [673, 770]\n\t\t\t\t\t\t//\t[\"35.1\", \"111.1\"] [\"34.6.1\", \"34.6.1\"] [6961, 6986]\n\t\t\t\t\t\tif (!subNo2) {\n\t\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\t\t\tconsole.warn(\"no existing node 4\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem1.parentNode.removeChild(elem1);\n\t\t\t\t\t\t\t\tif (pos1 > 0) {\n\t\t\t\t\t\t\t\t\tLVL=1,pos1=pos1;for(;;){pos1=html1.indexOf(\">\",pos1);if(\"/\"===html1.charAt(pos1-1)&&(LVL--,0>=LVL))break;pos1=html1.indexOf(\"<\",pos1);if(\"/\"===html1.charAt(pos1+1)){if(LVL--,0>=LVL){pos1=html1.indexOf(\">\",pos1+2);break}}else\"!\"!==html1.charAt(pos1+1)&&LVL++}pos1++; //INLINE\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// console.warn(\"removeChild bottom down\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t\t\t// logger.push([\"removeChild[first]\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [html2.substring(tagStartPos2, pos2)]]);\n\t\t\t\t\t\t\t\tpos2 = lastPos2;\n\t\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"not impl\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t//same level\n\t\t\t\t\t} else if (tagNo1 === tagNo2) {\n\n\t\t\t\t\t\t// [5, 5] [1, 2] [\"5.1.1\", \"5.2.1\"] [\"5.1\", \"5.1\"] [229, 227]\n\t\t\t\t\t\tif ( subNo1 < subNo2 ) {\n\t\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\t\t\tconsole.warn([\"no existing node 4\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem1.parentNode.removeChild(elem1);\n\t\t\t\t\t\t\t\tif (pos1 > 0) {\n\t\t\t\t\t\t\t\t\tLVL=1,pos1=pos1;for(;;){pos1=html1.indexOf(\">\",pos1);if(\"/\"===html1.charAt(pos1-1)&&(LVL--,0>=LVL))break;pos1=html1.indexOf(\"<\",pos1);if(\"/\"===html1.charAt(pos1+1)){if(LVL--,0>=LVL){pos1=html1.indexOf(\">\",pos1+2);break}}else\"!\"!==html1.charAt(pos1+1)&&LVL++}pos1++; //INLINE\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// console.warn(\"removeChild bottom down\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t\t\t// logger.push([\"removeChild[backward.last]\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [html2.substring(tagStartPos2, pos2)]]);\n\t\t\t\t\t\t\t\tpos2 = lastPos2;\n\t\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//[5, 5] [19, 18] [\"5.19.1\", \"5.18.1\"] [\"5.1\", \"5.1\"] [229, 231]\n\t\t\t\t\t\t} else if ( subNo1 > subNo2 ) {\n\t\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\telem1.parentNode.insertBefore(newNode.firstChild, elem1);\n\t\t\t\t\t\t\t// logger.push([\"this.insertBefore[elem1]\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]]);\n\n\t\t\t\t\t\t\tpos1 = lastPos1;\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2; //check later\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('not impl', [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t} //same parent\n\t\t\t\t\telse {\n\t\t\t\t\t\tconsole.warn('not impl', [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t}\n\n\t\t\t\t} //prevTagId1 === prevTagId2\n\n\n\n\t\t\t\t//end of previous html\n\t\t\t\telse if (pos1 < 0) {\n\n\t\t\t\t\t// ######## [\"28.9.1\", \"28.10.1\"] [\"28.8.1\", \"28.9.1\"] [-1, 16911]\n\t\t\t\t\tif ( tagNo1 === tagNo2) {\n\n\t\t\t\t\t\t// [\"28.9.1\", \"28.10.1\"] [\"28.8.1\", \"28.9.1\"] [-1, 16911]\n\t\t\t\t\t\tif (subNo1 < subNo2 ) {\n\t\t\t\t\t\t\telem1 = document.getElementById(tagNo2 + '.' + prevKey);\n\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\telem1.appendChild(newNode.firstChild);\n\t\t\t\t\t\t\t// console.info(\"this.appendChild\", [tagId1, tagId2], [prevTagId1, prevTagId2], [html2.substring(tagStartPos2, pos2)]);\n\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('not impl', [tagNo1, tagNo2], [subNo1, subNo2], [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (tagNo1 < tagNo2) {\n\n\t\t\t\t\t\t//prevTagId2 is a children\n\t\t\t\t\t\t// [126, 127] [66, false] [\"126.66.1\", \"127.1\"] [\"126.61.1\", \"126.66.1\"] [-1, 13065]\n\t\t\t\t\t\tif (prevTagId2.indexOf('.') !== prevTagId2.lastIndexOf('.')) {\n\t\t\t\t\t\t\t//not impl1 pos1 < 0 [14, 15] [6, false] [\"14.6.1\", \"15.1\"] [\"14.6.1\", \"14.6.1\"] [-1, 1950]\n\t\t\t\t\t\t\telem1 = document.getElementById(prevTagId2.slice(0, prevTagId2.indexOf('.') + 1) + prevKey);\n\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\t\t\t\t\t\t\t// console.info(\"prevTagId2.parent.appendChild\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\n\t\t\t\t\t\t\telem1.parentNode.appendChild(newNode.firstChild);\n\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t//this is children but prevTagId2 is parent\n\t\t\t\t\t\t//not impl [143, 144] [false, 499946] [\"143.1\", \"144.499946.1\"] [\"143.1\", \"144.1\"] [-1, 37542]\n\t\t\t\t\t\t} else if (subNo2) {\n\t\t\t\t\t\t\telem1 = document.getElementById(prevTagId2);\n\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\t\t\t\t\t\t\t// console.info(\"prevTagId2.appendChild\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\n\t\t\t\t\t\t\telem1.appendChild(newNode.firstChild);\n\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t//this and prevTagId2 is not children\n\t\t\t\t\t\t//not impl [125, 126] [false, false] [\"125.1\", \"126.1\"] [\"125.1\", \"125.1\"] [-1, 3444] [\" class=\"row odd blue\" row=\"5\"></div><div id=\"126.1\"]\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//////////// EXCEPTIONAL CASE : this is ambiguous, can't figure out new element a child or sibling of previousNode with current design :(\n\t\t\t\t\t\t\t//120 [\"119.1\", \"120.1\"] [\"118.1\", \"119.1\"] [119, 120] [-1, 3695]\n\n\t\t\t\t\t\t\telem1 = document.getElementById(prevTagId2);\n\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\t\t\t\t\t\t\t// console.info(\"prevTagId2.parent.appendChild\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\n\t\t\t\t\t\t\telem1.parentNode.appendChild(newNode.firstChild);\n\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\t// console.warn('not impl', [tagNo1, tagNo2], [subNo1, subNo2], [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('not impl', [tagNo1, tagNo2], [subNo1, subNo2], [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t//end of new html\n\t\t\t\telse if (pos2 < 0) {\n\n\t\t\t\t\t//same base id\n\t\t\t\t\tif (tagNo1 === tagNo2) {\n\n\t\t\t\t\t\t// [28, 28] [undefined, 13] [\"28.1\", \"28.13.1\"] [\"28.1\", \"28.1\"] [-1, 12127]\n\t\t\t\t\t\tif (subNo1 < subNo2) {\n\t\t\t\t\t\t\telem1 = document.getElementById(prevTagId2);\n\n\t\t\t\t\t\t\ttagStartPos2 = html2.lastIndexOf('<', pos2 - 6);\n\t\t\t\t\t\t\tLVL=1,pos2=tagStartPos2;for(;;){pos2=html2.indexOf(\">\",pos2);if(\"/\"===html2.charAt(pos2-1)&&(LVL--,0>=LVL))break;pos2=html2.indexOf(\"<\",pos2);if(\"/\"===html2.charAt(pos2+1)){if(LVL--,0>=LVL){pos2=html2.indexOf(\">\",pos2+2);break}}else\"!\"!==html2.charAt(pos2+1)&&LVL++}pos2++; //INLINE\n\t\t\t\t\t\t\tnewNode.innerHTML = html2.substring(tagStartPos2, pos2);\n\n\t\t\t\t\t\t\telem1.appendChild(newNode.firstChild);\n\t\t\t\t\t\t\t// logger.push([\"appendChild[parent.last]2<0\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]]);\n\n\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t//[28, 28] [27, 26] [\"28.27.1\", \"28.26.1\"] [\"28.26.1\", \"28.25.1\"] [12548, -1]\n\t\t\t\t\t\t} else if (subNo1 > subNo2) {\n\n\t\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\t\t\tif (!elem1) {\n\t\t\t\t\t\t\t\tconsole.warn([\"no existing node 4\", [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem1.parentNode.removeChild(elem1);\n\t\t\t\t\t\t\t\tif (pos1 > 0) {\n\t\t\t\t\t\t\t\t\tLVL=1,pos1=pos1;for(;;){pos1=html1.indexOf(\">\",pos1);if(\"/\"===html1.charAt(pos1-1)&&(LVL--,0>=LVL))break;pos1=html1.indexOf(\"<\",pos1);if(\"/\"===html1.charAt(pos1+1)){if(LVL--,0>=LVL){pos1=html1.indexOf(\">\",pos1+2);break}}else\"!\"!==html1.charAt(pos1+1)&&LVL++}pos1++; //INLINE\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// console.warn(\"removeChild bottom down\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\n\t\t\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('not impl3 pos2 < 0', [tagNo1, tagNo2], [subNo1, subNo2], [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2], [html2.substring(tagStartPos2, pos2)]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t//not impl [\"146.1\", \"145.66.1\"] [\"145.66.1\", \"145.61.1\"] [39591, -1]\n\t\t\t\t\t//not impl [\"145.1\", \"144.66.1\"] [\"144.66.1\", \"144.61.1\"] [38200, -1]\n\t\t\t\t\t//not impl [\"144.1\", \"143.66.1\"] [\"143.66.1\", \"143.61.1\"] [36747, -1]\n\t\t\t\t\t//resize bottom up - make smaller\n\t\t\t\t\t} else if (tagNo1 > tagNo2) {\n\t\t\t\t\t\telem1 = document.getElementById(tagId1);\n\t\t\t\t\t\telem1.parentNode.removeChild(elem1);\n\t\t\t\t\t\tif (pos1 > 0) {\n\t\t\t\t\t\t\tLVL=1,pos1=pos1;for(;;){pos1=html1.indexOf(\">\",pos1);if(\"/\"===html1.charAt(pos1-1)&&(LVL--,0>=LVL))break;pos1=html1.indexOf(\"<\",pos1);if(\"/\"===html1.charAt(pos1+1)){if(LVL--,0>=LVL){pos1=html1.indexOf(\">\",pos1+2);break}}else\"!\"!==html1.charAt(pos1+1)&&LVL++}pos1++; //INLINE\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// console.warn(\"removeChild bottom down\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t\t// logger.push([\"removeChild[backward.last]\", tagId1, [tagId1, tagId2], [prevTagId1, prevTagId2], [html2.substring(tagStartPos2, pos2)]]);\n\n\t\t\t\t\t\ttagId1 = prevTagId1;\n\t\t\t\t\t\ttagId2 = prevTagId2;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('not impl', [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t////////////// THIS SHOULD NEVER REACH ///////////////\n\n\t\t\t\t// console.log('====')\n\t\t\t\t// logger.slice(-10).forEach(function(item){\n\t\t\t\t//\t console.info.apply(console, item)\n\t\t\t\t// })\n\t\t\t\tconsole.error(\"different Id - not supported for now!\", [tagNo1, tagNo2], [subNo1, subNo2], [tagId1, tagId2], [prevTagId1, prevTagId2], [pos1, pos2]);\n\t\t\t\tconsole.log([html1.substr(pos1 - 100, 100), html1.substr(pos1, 20)]);\n\t\t\t\tconsole.log([html2.substr(pos2 - 100, 100), html2.substr(pos2, 20)]);\n\t\t\t\t// console.log(html1);\n\t\t\t\t// console.log(html2)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} //infinite loop\n\n\t}\n\n\tvar camelCaseRE = /-(.)/g;\n\tfunction camelCase(str) {\n\t\treturn str.replace(camelCaseRE, function($0, $1){ return $1.toUpperCase(); });\n\t}\n\n\t// parse attributes from html open tag and patch DOM when different\n\tfunction parsePatchAttr(chunkA, chunkB, elem) {\n\t\tvar tagId;\n\t\tvar posA1, posA2, posB1, posB2;\n\t\tvar posDiff = 0;\n\t\tvar attrName, attrVal1, attrVal2;\n\t\t// var len1 = chunk1.length;\n\t\t// console.log('chunks', [chunkA, chunkB]);\n\n\t\t//extract id to tag, if no elem specified\n\t\tif (!elem) {\n\t\t\tposA1 = chunkA.indexOf(' id=\"', posA1);\n\t\t\tif (posA1 >= 0) {\n\t\t\t\tposA1 += 5;\n\t\t\t\tposA2 = chunkA.indexOf('\"', posA1);\n\t\t\t\ttagId = chunkA.slice(posA1, posA2);\n\t\t\t\telem = document.getElementById(tagId);\n\t\t\t\tif (!elem) {\n\t\t\t\t\tthrow console.error('tag not found', [posA1, posA2, tagId, elem, chunkA, chunkB]);\n\t\t\t\t}\n\t\t\t\tposA2 += 2;\n\t\t\t} else {\n\t\t\t\tthrow console.error('id not found', [posA1, posA1, chunkA, chunkB]);\n\t\t\t}\n\t\t} else {\n\t\t\t//first char is always space\n\t\t\tposA2 = 1;\n\t\t}\n\n\t\tfor(;;) {\n\t\t\t//attr name\n\t\t\tposA1 = chunkA.indexOf('=\"', posA2);\n\t\t\tif (posA1 < 0) break;\n\t\t\tattrName = chunkA.slice(posA2, posA1);\n\n\t\t\t//attr values\n\t\t\tposA2 = chunkA.indexOf('\"', posA1 + 2);\n\t\t\tattrVal1 =\tchunkA.slice(posA1 + 2, posA2);\n\n\t\t\tposB1 = posA1 + posDiff;\n\t\t\tposB2 = chunkB.indexOf('\"', posB1 + 2);\n\t\t\tattrVal2 =\tchunkB.slice(posB1 + 2, posB2);\n\n\t\t\tif (attrVal1 !== attrVal2) {\n\t\t\t\t// value as property\n\t\t\t\tif (attrName === 'value') {\n\t\t\t\t\telem[attrName] = attrVal2;\n\n\t\t\t\t// prefix with - as property, like -scrollLeft\n\t\t\t\t} else if (attrName.charAt(0) === '-') {\n\t\t\t\t\t//only if old value is same is element property to prevent loop (firefox)\n\t\t\t\t\tif (elem[attrName.substr(1)] == attrVal1) {\n\t\t\t\t\t\telem[attrName.substr(1)] = attrVal2;\n\t\t\t\t\t}\n\t\t\t\t\t// console.log('prop-', attrName.substr(1), attrVal2, elem[attrName.substr(1)]);\n\n\t\t\t\t} else {\n\t\t\t\t\t\telem.setAttribute(attrName, attrVal2);\n\t\t\t\t}\n\t\t\t\tposDiff = posB2 - posA2;\n\n\t\t\t}\n\n\t\t\tposA2 += 2;\n\t\t}\n\n\t\treturn tagId;\n\t}\n\n\t// extract value of id from part of html open tag\n\t// only id=\"xxx\" supported, this is internal use, so it's always double-quotes\n\t// inline this function during building\n\tfunction getTagId(partial, start) {\n\t\tvar pos = partial.indexOf(' id=\"', start), endPos;\n\t\tif (pos >= 0) {\n\t\t\tpos += 5;\n\t\t\tendPos = partial.indexOf('\"', pos);\n\t\t\treturn partial.substring(pos, endPos);\n\t\t}\n\t}\n\n\t// split filters into array, take care of | and || as different\n\tfunction splitFilters(input, pos) {\n\t\tvar prevPos = 0;\n\t\tvar ret = [];\n\t\twhile (pos !== -1) {\n\t\t\tif (input.charAt(pos + 1) === '|') {\n\t\t\t\tpos += 2;\n\t\t\t} else {\n\t\t\t\tret.push(input.substring(prevPos, pos));\n\t\t\t\tprevPos = ++pos;\n\t\t\t}\n\t\t\tpos = input.indexOf('|', pos);\n\t\t}\n\t\tif (prevPos < input.length) {\n\t\t\tret.push(input.substr(prevPos));\n\t\t}\n\t\treturn ret;\n\t}\n\n\t// function parseStyle(styleObj) {\n\t// \tvar ret = '';\n\t// \tfor (var x in styleObj) {\n\t// \t\tret += x + ':' + styleObj[x] + ';';\n\t// \t}\n\t// \treturn ret;\n\t// }\n\n\t// ToDo: check compile performance with regex\n\tvar ngClassRegex = /('[^']+'|\"[^\"]+\"|[\\w$]+)\\s*:\\s*((?:[$.\\w]+|\\([^)]+\\)|[^},])+)/g;\n\tvar varOrStringRegex = /'[^']*'|\"[^\"]*\"|[\\w$]+|[^\\w$'\"]+/g;\n\tvar quotedStringRegex = /\"[^\"]*\"|'[^']*'/g;\n\tvar whiteSpaceRegex = /\\s{2,}|\\n/g;\n\tvar removeUnneededQuotesRegex = /\\b([\\w_-]+=)\"([^\"'=\\s]+)\"(?=[\\s>])/g;\n\tvar lazyNgAttrRegex = /^(?:src|alt|title|href)/;\n\tvar $indexRegex = /\\$index/g;\n\tvar $parent$indexRegex = /(?:\\$parent\\.)+\\$index/g;\n\n\t// no-val attributes, for more exhaustive list - https://github.com/kangax/html-minifier/issues/63\n\tvar noValAttrRegex = /^(?:checked|selected|disabled|readonly|multiple|required|hidden|nowrap)/;\n\n\t// export as doTA.compile\n\tfunction compileHTML(template, options) {\n\t\toptions = options || {};\n\t\tvar val_mod = options.loose ? \"||''\" : '';\n\t\tvar watchDiff = options.watchDiff;\n\t\tvar diffLevel = +options.diffLevel;\n\t\tvar VarMap = {\n\t\t\ttrue: 1, false: 1, null: 1, void: 1, undefined: 1, this: 1,\n\t\t\tdoTA: 1, $index: 1, S: 1, F: 1, $attr: 1, X: 1, K: 1, M: 1, N: 1,\n\t\t\tMath: 1, Date: 1, String: 1, Object: 1, Array: 1, Infinity: 1, NaN: 1,\n\t\t\t// alert: 1, confirm: 1, prompt: 1,\n\t\t\tvar: 1, in: 1\n\t\t};\n\t\tvar level = 0, ngRepeatLevel;\n\t\tvar ngIfLevel, skipLevel, ngIfCounterTmp, ngIfLevels = [], ngIfLevelMap = {};\n\t\tvar LevelMap = {}, LevelVarMap = {};\n\t\tvar KeyMap = [], keyLevel = 0;\n\t\tvar WatchMap = {}, Watched;\n\t\tvar doTAPass, doTAContinue;\n\t\tvar compiledFn;\n\t\tvar uniqueId = doTA.getId(options.dotaRender);\n\t\tvar idHash = {};\n\t\tvar FnText = '';\n\n\t\tif (options.key) {\n\t\t\tFnText += indent(level) + \"var R='';\\n\";\n\t\t} else {\n\t\t\tFnText += indent(level) + \"'use strict';var \" +\n\t\t\t(watchDiff ? 'M,N=1,' : '') +\n\t\t\t\"R='';\\n\"; //ToDO: check performance on var declaration\n\t\t}\n\n\t\t//clean up extra white spaces and line break\n\t\ttemplate = template.replace(whiteSpaceRegex, ' ');\n\n\t\tif (options.strip) {\n\t\t\ttemplate = template.replace(/>\\s+/g, '>').replace(/\\s+</g, '<');\n\t\t}\n\n\t\t// when encode is set, find strings and encode < and >, or parser will throw error.\n\t\tif (options.encode) {\n\t\t\ttemplate = template.replace(quotedStringRegex, function($0) {\n\t\t\t\treturn $0.replace(/[<>]/g, function($00) {\n\t\t\t\t\treturn {'>': '&gt;', '<': '&lt;'}[$00];\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// attach plain variables to scope variables\n\t\tfunction attachScope(v) {\n\t\t\t//console.log(VarMap, [v]);\n\t\t\tif (v) {\n\t\t\t\t//var DEBUG = /error/.test(v);\n\t\t\t\t//DEBUG && console.log(11, [v]);\n\n\t\t\t\t//ToDo: still buggy, this need to improve\n\t\t\t\tvar vv = '';\n\t\t\t\tvar matches = v.match(varOrStringRegex);\n\t\t\t\t//DEBUG && console.log(12, matches);\n\t\t\t\tfor(var i = 0; i < matches.length; i++) {\n\n\t\t\t\t\tif (valid_chr.indexOf(matches[i].charAt(0)) >= 0 && !VarMap[matches[i]] &&\n\t\t\t\t\t\t(!i || matches[i-1][matches[i-1].length-1] !== '.')) {\n\t\t\t\t\t\tvv += 'S.' + matches[i];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (matches[i].indexOf('$index') >= 0) {\n\t\t\t\t\t\t\t//only support last level for now\n\t\t\t\t\t\t\tvv += matches[i].replace($indexRegex, LevelVarMap[ngRepeatLevel]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvv += matches[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//DEBUG && console.log(55, vv);\n\t\t\t\treturn vv;\n\t\t\t}\n\t\t\treturn v;\n\t\t}\n\n\t\t// escape single quotes with backslash\n\t\tfunction escapeSingleQuote(str) {\n\t\t\tvar quotePos = str.indexOf(\"'\");\n\t\t\tif (quotePos >= 0) {\n\t\t\t\tvar ret = '';\n\t\t\t\tvar prevQuotePos = 0;\n\t\t\t\tdo {\n\t\t\t\t\tret += str.substring(prevQuotePos, quotePos);\n\t\t\t\t\t//escaped quote\n\t\t\t\t\tif (str.charAt(quotePos - 1) !== '\\\\') {\n\t\t\t\t\t\tret += \"\\\\\";\n\t\t\t\t\t}\n\t\t\t\t\tprevQuotePos = quotePos;\n\t\t\t\t\tquotePos = str.indexOf(\"'\", prevQuotePos + 1);\n\t\t\t\t} while (quotePos > 0);\n\t\t\t\tret += str.substr(prevQuotePos);\n\t\t\t\treturn ret;\n\t\t\t} else {\n\t\t\t\treturn str;\n\t\t\t}\n\t\t}\n\n\t\t// interpolation\n\t\tfunction interpolate(str) {\n\t\t\tvar pos = str.indexOf('{{');\n\t\t\tif (pos >= 0) {\n\t\t\t\tvar prevPos = 0;\n\t\t\t\tvar ret = '';\n\t\t\t\tvar outsideStr, insideStr;\n\t\t\t\tdo {\n\t\t\t\t\toutsideStr = str.substring(prevPos, pos);\n\t\t\t\t\tret += escapeSingleQuote(outsideStr);\n\n\t\t\t\t\t//skip {{\n\t\t\t\t\tprevPos = pos + 2;\n\t\t\t\t\tpos = str.indexOf('}}', prevPos);\n\n\t\t\t\t\tinsideStr = str.substring(prevPos, pos);\n\t\t\t\t\tret += \"'+(\" + attachFilter(insideStr) + val_mod + \")+'\";\n\n\t\t\t\t\t//skip }} for next\n\t\t\t\t\tprevPos = pos + 2;\n\t\t\t\t\tpos = str.indexOf('{{', prevPos);\n\t\t\t\t} while (pos > 0);\n\n\t\t\t\t//remaining text outside interpolation\n\t\t\t\tret += escapeSingleQuote(str.substr(prevPos));\n\t\t\t\treturn ret;\n\t\t\t} else {\n\t\t\t\treturn escapeSingleQuote(str);\n\t\t\t}\n\t\t}\n\n\t\t// attach $filters\n\t\tfunction attachFilter($1) {\n\t\t\t//console.log(333,$1);\n\t\t\tvar pos = $1.indexOf('|');\n\t\t\tif (pos === -1) {\n\t\t\t\treturn attachScope($1);\n\t\t\t} else {\n\t\t\t\t//ToDo: check this line later\n\t\t\t\tvar v = splitFilters($1, pos);\n\t\t\t\tvar val = attachScope(v[0]);\n\t\t\t\tvar prevColonPos, colonPos;\n\t\t\t\tvar filter;\n\n\t\t\t\t//parse each filters\n\t\t\t\tfor(var i = 1; i < v.length; i++) {\n\t\t\t\t\tfilter = v[i];\n\t\t\t\t\tprevColonPos = 0;\n\n\t\t\t\t\tcolonPos = filter.indexOf(':');\n\t\t\t\t\t//filter with params\n\t\t\t\t\tif (colonPos > 0) {\n\t\t\t\t\t\tval = \"F('\" + filter.slice(prevColonPos, colonPos).trim() + \"')(\" + val;\n\t\t\t\t\t\tprevColonPos = ++colonPos;\n\t\t\t\t\t\tcolonPos = filter.indexOf(':', prevColonPos);\n\t\t\t\t\t\twhile (colonPos > 0) {\n\t\t\t\t\t\t\tval += ',' + attachScope(filter.slice(prevColonPos, colonPos));\n\t\t\t\t\t\t\tprevColonPos = ++colonPos;\n\t\t\t\t\t\t\tcolonPos = filter.indexOf(':', prevColonPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tval += ',' + attachScope(filter.substr(prevColonPos)) + ')';\n\n\t\t\t\t\t//filter without params\n\t\t\t\t\t} else {\n\t\t\t\t\t\tval = \"F('\" + filter.trim() + \"')(\" + val + ')';\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\n\t\tfunction apply$index(val) {\n\t\t\tvar count, tmpRepeatLevel;\n\n\t\t\tif (val.indexOf('$parent.$index') >= 0) {\n\t\t\t\ttmpRepeatLevel = ngRepeatLevel;\n\t\t\t\tval = val.replace($parent$indexRegex, function($0) {\n\t\t\t\t\tcount = $0.match(/\\$parent/g).length; //may need to rewrite with indexOf\n\t\t\t\t\twhile (count>0) {\n\t\t\t\t\t\twhile (tmpRepeatLevel >= 0 && typeof LevelVarMap[--tmpRepeatLevel] === 'undefined') {}\n\t\t\t\t\t\t--count;\n\t\t\t\t\t}\n\t\t\t\t\treturn \"'+\" + LevelVarMap[tmpRepeatLevel] + \"+'\";\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (val.indexOf('$index') >= 0) {\n\t\t\t\treturn val.replace($indexRegex, \"'+\" + LevelVarMap[ngRepeatLevel] + \"+'\");\n\t\t\t}\n\t\t\treturn val;\n\t\t}\n\n\t\t//parse the element\n\t\tparseHTML(template, {\n\t\t\t//open tag with attributes\n\t\t\topenTag: function(tagName, attr, selfClosing) {\n\t\t\t\t// debug && console.log('openTag', [tagName, attr]);\n\t\t\t\tvar parsedAttr = {}, customId, noValAttr = '';\n\t\t\t\tvar doTAPassThis, x;\n\n\t\t\t\t//skip parsing if dota-pass is specified (interpolation will still be expanded)\n\t\t\t\t// https://jsperf.com/hasownproperty-vs-in-vs-undefined/12\n\t\t\t\tif (typeof attr['dota-pass'] !== 'undefined') {\n\t\t\t\t\tif (attr['dota-pass'] === 'this') {\n\t\t\t\t\t\tdoTAPass = doTAPassThis = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdoTAPass = level; doTAContinue = 0;\n\t\t\t\t\t}\n\t\t\t\t//re-enable dota parsing\n\t\t\t\t} else if (typeof attr['dota-continue'] !== 'undefined') {\n\t\t\t\t\tdoTAContinue = level;\n\t\t\t\t}\n\n\t\t\t\t//unless dota-pass or with dota-continue\n\t\t\t\tif (doTAPass === void 0 || doTAContinue) {\n\n\t\t\t\t\tif (diffLevel && attr.skip) {\n\t\t\t\t\t\tskipLevel = level;\n\t\t\t\t\t\tvar attrSkip = attr.skip;\n\t\t\t\t\t\tattr.skip = void 0;\n\t\t\t\t\t\tFnText += indent(level, 1) + 'var O'+ level + '=N+' + attrSkip + '; \\n';\n\t\t\t\t\t}\n\n\t\t\t\t\t//ng-repeat to while/for loop\n\t\t\t\t\tif (attr['ng-repeat']) {\n\t\t\t\t\t\t//console.log(21,[x], [val]);\n\t\t\t\t\t\tLevelMap[level] = LevelMap[level] ? LevelMap[level] + 1 : 1;\n\t\t\t\t\t\tvar idx = 'i' + level, l = 'l'+ level;\n\t\t\t\t\t\tvar NG_REPEAT = attr['ng-repeat'];\n\t\t\t\t\t\tvar inPos = NG_REPEAT.indexOf(' in ');\n\t\t\t\t\t\tvar repeatVar = NG_REPEAT.substr(0, inPos), repeatSrc = NG_REPEAT.substr(inPos + 4);\n\t\t\t\t\t\tvar commaPos = repeatVar.indexOf(',');\n\t\t\t\t\t\tvar pipePos = repeatSrc.indexOf('|'), repeatSrcNew;\n\t\t\t\t\t\tvar colonPos;\n\n\t\t\t\t\t\t//store variable name to use for $index later\n\t\t\t\t\t\t//this is ng-repeat specific, LevelMap[level] is same for ng-if too\n\t\t\t\t\t\tLevelVarMap[level] = idx;\n\t\t\t\t\t\tngRepeatLevel = level;\n\n\t\t\t\t\t\tif (pipePos > 0) {\n\t\t\t\t\t\t\trepeatSrcNew = attachFilter(repeatSrc);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trepeatSrcNew = attachScope(repeatSrc);\n\t\t\t\t\t\t\tcolonPos = repeatSrcNew.indexOf(':');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Range: \"i in 1:10\" ==> (for i = 1; i < 10; i++)\n\t\t\t\t\t\tif (colonPos >= 0) {\n\t\t\t\t\t\t\tvar start = repeatSrcNew.substr(0, colonPos) || 0, end, step;\n\t\t\t\t\t\t\tvar anotherColon = repeatSrcNew.indexOf(':', ++colonPos);\n\t\t\t\t\t\t\tif (anotherColon > 0) {\n\t\t\t\t\t\t\t\tend = repeatSrcNew.substring(colonPos, anotherColon);\n\t\t\t\t\t\t\t\tstep = repeatSrcNew.substr(anotherColon + 1);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tend = repeatSrcNew.substr(colonPos);\n\t\t\t\t\t\t\t\tstep = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// console.log([start, end, step, repeatSrcNew, colonPos]);\n\n\t\t\t\t\t\t\tFnText += indent(level, 1) + 'for(var ' +\n\t\t\t\t\t\t\t\trepeatVar + '=' + start + ';' +\n\t\t\t\t\t\t\t\trepeatVar + (step > 0 ? '<' : '>') + end + ';' + repeatVar + '+=' + step + '){\\n';\n\t\t\t\t\t\t\tVarMap[repeatVar] = 1;\n\n\t\t\t\t\t\t// Object: \"k, v in {}\" ==> (for in {})\n\t\t\t\t\t\t} else if (commaPos > 0) {\n\t\t\t\t\t\t\tvar key = repeatVar.substr(0, commaPos);\n\t\t\t\t\t\t\tvar value = repeatVar.substr(commaPos + 1);\n\t\t\t\t\t\t\tFnText += indent(level, 1) + 'var ' +\n\t\t\t\t\t\t\t\tvalue + ',D' + level + '=' + repeatSrcNew + ';\\n';\n\t\t\t\t\t\t\tFnText += indent(level, 1) + 'for(var ' + key + ' in D' + level + '){\\n';\n\t\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\t\t\t\t\t\t space is needed for manual uglify\t->\tvvv\n\t\t\t\t\t\t\tFnText += indent(level) + value + ' = ' + 'D' + level + '[' + key + ']; \\n';\n\t\t\t\t\t\t\tVarMap[key] = VarMap[value] = 1;\n\n\t\t\t\t\t\t// Array: \"k in []\" ==> while loop\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tFnText += indent(level, 1) + 'var ' +\n\t\t\t\t\t\t\t\trepeatVar + ',D' + level + '=' + repeatSrcNew + ',' +\n\t\t\t\t\t\t\t\tidx + '=-1,' + l + '=D' + level + '.length;\\n';\n\t\t\t\t\t\t\tFnText += indent(level, 1) + 'while(++' + idx + '<' + l + '){\\n';\n\t\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\t\t\t\tspace is needed for manual uglify\t->\tvvv\n\t\t\t\t\t\t\tFnText += indent(level) + repeatVar + '=D' + level + '[' + idx + ']; \\n';\n\t\t\t\t\t\t\tVarMap[repeatVar] = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//remote attribute not to get forwarded to angular\n\t\t\t\t\t\tattr['ng-repeat'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (diffLevel === 3 && attr.key) {\n\t\t\t\t\t\tkeyLevel = level;\n\t\t\t\t\t\tKeyMap[level] = attr.key;\n\t\t\t\t\t\tFnText += indent(level, 1) + 'var ' + attr.key + '=N,M=1; \\n';\n\t\t\t\t\t\tattr.key = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t//re-render sub template\n\t\t\t\t\tif (attr.refresh) {\n\t\t\t\t\t\tcustomId = 1;\n\t\t\t\t\t\tvar oneTimeBinding = attr.refresh.indexOf('::');\n\t\t\t\t\t\tFnText += indent(level, 2) +\n\t\t\t\t\t\t\t(!Watched ? 'var ' + (watchDiff ? '': 'N=1,') + 'T=this;T.W=[];' : '') +\n\t\t\t\t\t\t\t'var W={N:N,I:N+\"' + '.' + uniqueId + '\",W:\"' +\n\t\t\t\t\t\t\t(oneTimeBinding >=0 ? attr.refresh.substr(oneTimeBinding + 2) + '\",O:1': attr.refresh + '\"') +\n\t\t\t\t\t\t\t(attr.compile ? ',C:1' : '') +\n\t\t\t\t\t\t\t'};T.W.push(W);\\n';\n\t\t\t\t\t\tWatchMap[level] = Watched = 1;\n\t\t\t\t\t\tFnText += indent(level, 2) + 'W.F=function(S,F,$attr,X,N){var R=\"\";\\n';\n\t\t\t\t\t\tattr.refresh = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr['ng-init']) {\n\t\t\t\t\t\tvar eqPos = attr[\"ng-init\"].indexOf('=');\n\t\t\t\t\t\tif (eqPos > 0) {\n\t\t\t\t\t\t\tvar varName = attr[\"ng-init\"].substr(0, eqPos);\n\t\t\t\t\t\t\tif (varName.indexOf('.') < 0 && varName.indexOf('[') < 0) {\n\t\t\t\t\t\t\t\tFnText += indent(level) + 'var ' + varName + '=' +\n\t\t\t\t\t\t\t\t\tattachScope(attr[\"ng-init\"].substr(eqPos + 1)) + '; \\n';\n\t\t\t\t\t\t\t\tVarMap[varName] = 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tFnText += indent(level) + attachScope(attr[\"ng-init\"]) + '; \\n';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tFnText += indent(level) + attachScope(attr[\"ng-init\"]) + '; \\n';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tattr['ng-init'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t//ng-if to javascript if\n\t\t\t\t\tif (attr['ng-if']) {\n\t\t\t\t\t\tif (diffLevel) {\n\t\t\t\t\t\t\tngIfLevel = level;\n\t\t\t\t\t\t\tngIfLevels.push(level);\n\t\t\t\t\t\t\tngIfLevelMap[level] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tLevelMap[level] = LevelMap[level] ? LevelMap[level] + 1 : 1;\n\t\t\t\t\t\tFnText += indent(level, 1) + 'if('+ attachScope(attr['ng-if']) +'){\\n';\n\t\t\t\t\t\t// console.log('ng-if starts here', level);\n\t\t\t\t\t\tattr['ng-if'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr.elif) {\n\t\t\t\t\t\tFnText += indent(level, 1) + 'else if('+ attachScope(attr.elif) +'){\\n';\n\t\t\t\t\t\tLevelMap[level] = LevelMap[level] ? LevelMap[level] + 1 : 1;\n\t\t\t\t\t\tattr.elif = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof attr['else'] !== 'undefined' && !watchDiff) {\n\t\t\t\t\t\tFnText += indent(level, 1) + 'else{\\n';\n\t\t\t\t\t\tLevelMap[level] = LevelMap[level] ? LevelMap[level] + 1 : 1;\n\t\t\t\t\t\tattr['else'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t//remove +''+ from class, for unnecessary string concat\n\t\t\t\t\tif (attr.class) {\n\t\t\t\t\t\tparsedAttr.class = interpolate(attr.class);\n\t\t\t\t\t\tattr.class = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr['ng-class']) {\n\t\t\t\t\t\tvar match;\n\t\t\t\t\t\tvar ngScopedClass = attachScope(attr['ng-class']);\n\t\t\t\t\t\tparsedAttr.class = parsedAttr.class || '';\n\t\t\t\t\t\twhile((match = ngClassRegex.exec(ngScopedClass)) !== null) {\n\t\t\t\t\t\t\tparsedAttr.class +=\n\t\t\t\t\t\t\t\t(\"'+(\" + match[2] + '?' +\n\t\t\t\t\t\t\t\t\t\"'\" + (parsedAttr.class ? ' ' : '') + match[1].replace(/['\"]/g, '') +\n\t\t\t\t\t\t\t\t\t\"':'')+'\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tattr['ng-class'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr['ng-show']) {\n\t\t\t\t\t\tparsedAttr.class = parsedAttr.class || '';\n\t\t\t\t\t\tparsedAttr.class += \"'+(\" + attachScope(attr['ng-show']) +\n\t\t\t\t\t\t\t\"?'':'\" + (parsedAttr.class ? ' ' : '') + \"ng-hide')+'\";\n\t\t\t\t\t\tattr['ng-show'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr['ng-style']) {\n\t\t\t\t\t\tparsedAttr.style = (attr.style ? attr.style + ';' : '') + interpolate(attr['ng-style']);\n\t\t\t\t\t\tattr['ng-style'] = void 0;\n\t\t\t\t\t\tattr.style = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr['ng-hide']) {\n\t\t\t\t\t\tparsedAttr.class = parsedAttr.class || '';\n\t\t\t\t\t\tparsedAttr.class += \"'+(\" + attachScope(attr['ng-hide']) +\n\t\t\t\t\t\t\t\"?'\" + (parsedAttr.class ? ' ' : '') + \"ng-hide':'')+'\";\n\t\t\t\t\t\tattr['ng-hide'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (options.model && attr['ng-model']) {\n\t\t\t\t\t\tif (attr['ng-model'].indexOf('$index') >= 0) {\n\t\t\t\t\t\t\tparsedAttr['dota-model'] = apply$index(attr['ng-model']);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsedAttr['dota-model'] = attr['ng-model'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tattr['ng-model'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (options.bind && attr['ng-bind']) {\n\t\t\t\t\t\tif (attr['ng-bind'].indexOf('$index') >= 0) {\n\t\t\t\t\t\t\tparsedAttr['dota-bind'] = apply$index(attr['ng-bind']);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsedAttr['dota-bind'] = attr['ng-bind'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tattr['ng-bind'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (attr['ng-value']) {\n\t\t\t\t\t\tparsedAttr.value = \"'+(\" + attachFilter(attr['ng-value']) + \")+'\";\n\t\t\t\t\t\tattr['ng-value'] = void 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t//some cleanup\n\t\t\t\t\tif (parsedAttr.class) {\n\t\t\t\t\t\tparsedAttr.class = parsedAttr.class.replace(/\\+''\\+/g, '+');\n\t\t\t\t\t}\n\n\t\t\t\t\t// expand interpolations on attributes, and some more\n\t\t\t\t\tfor (x in attr) {\n\t\t\t\t\t\tvar attrVal = attr[x];\n\t\t\t\t\t\tif (attrVal === void 0) { continue; }\n\n\t\t\t\t\t\t// some ng- attributes\n\t\t\t\t\t\tif (x.substr(0, 3) === 'ng-') {\n\t\t\t\t\t\t\t//some ng-attr are just don't need it here.\n\t\t\t\t\t\t\tvar attrName = x.substr(3);\n\t\t\t\t\t\t\t//something like ng-src, ng-href, etc.\n\t\t\t\t\t\t\tif (lazyNgAttrRegex.test(attrName)) {\n\t\t\t\t\t\t\t\tx = attrName;\n\n\t\t\t\t\t\t\t//convert ng-events to dota-events, to be bind later with native events\n\t\t\t\t\t\t\t} else if (options.event && events.indexOf(' ' + attrName + ' ') >= 0) {\n\t\t\t\t\t\t\t\t//add class 'de' for one time querying\n\t\t\t\t\t\t\t\tif (parsedAttr.class) {\n\t\t\t\t\t\t\t\t\tif (parsedAttr.class.substr(0, 2) !== 'de') {\n\t\t\t\t\t\t\t\t\t\tparsedAttr.class = 'de ' + parsedAttr.class;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparsedAttr.class = 'de';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// parsedAttr.de = 1;\n\t\t\t\t\t\t\t\tx = 'de-' + attrName;\n\n\t\t\t\t\t\t\t} else if (noValAttrRegex.test(attrName)) {\n\t\t\t\t\t\t\t\tnoValAttr += \"'+(\" + attachScope(attrVal) + \"?' \" + attrName + \"=\\\"\\\"':'')+'\";\n\t\t\t\t\t\t\t\t//noValAttr will attach later\n\t\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (x.charAt(0) === '-') {\n\t\t\t\t\t\t\tx = '-' + camelCase(x.substr(1));\n\t\t\t\t\t\t\tparsedAttr[x] = \"'+(\" + attachScope(attrVal) + \")+'\";\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//ng-repeat loop variables are not available!\n\t\t\t\t\t\t// only way to acccess is to use $index like \"data[$index]\"\n\t\t\t\t\t\t// instead of \"item\" as in \"item in data\"\n\t\t\t\t\t\tparsedAttr[x] = apply$index(interpolate(attrVal));\n\t\t\t\t\t}\n\n\t\t\t\t// pass all attributes to angular, except interpolation and $index\n\t\t\t\t} else {\n\t\t\t\t\tif (doTAPassThis) {\n\t\t\t\t\t\tdoTAPass = void 0;\n\t\t\t\t\t}\n\t\t\t\t\t//still expand interpolation even if dota-pass is set\n\t\t\t\t\tfor (x in attr) {\n\t\t\t\t\t\tparsedAttr[x] = apply$index(interpolate(attr[x]));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//write tag back as string\n\t\t\t\tFnText += indent(level) + \"R+='<\" + tagName;\n\n\t\t\t\t//make id attr come before anything\n\t\t\t\tif (customId || watchDiff) {\n\t\t\t\t\tvar tagId = idHash[uniqueId + '.' + level] = parsedAttr.id || ( (\n\t\t\t\t\t\tkeyLevel < level && KeyMap[keyLevel] || options.key ?\n\t\t\t\t\t\t\"'+\" + (options.key || KeyMap[keyLevel]) + \"+'.'+M+++'.\" :\n\t\t\t\t\t\t\"'+N+++'.\"\n\t\t\t\t\t) + uniqueId);\n\t\t\t\t\tFnText += ' id=\"' + tagId + '\"';\n\t\t\t\t\tif (parsedAttr.id) {\n\t\t\t\t\t\tparsedAttr.id = void 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//write back attributes\n\t\t\t\tfor(var k in parsedAttr) {\n\t\t\t\t\tFnText += \" \" + k + '=\"' + parsedAttr[k] + '\"';\n\t\t\t\t}\n\n\t\t\t\t//attach boolean attributes at last\n\t\t\t\tFnText += noValAttr +\t(selfClosing ? ' /' : '') + \">';\\n\";\n\n\t\t\t\tif (watchDiff) {\n\t\t\t\t\t// FnText += indent(level) + \"N++; \\n\";\n\t\t\t\t\tif (ngIfLevelMap[ngIfLevel] >= 0) {\n\t\t\t\t\t\tngIfLevelMap[ngIfLevel]++;\n\t\t\t\t\t\t// console.log('isPath ngIfCounter', [tagName, ngIfCounter]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//expand doTA templates with expand=1 option\n\t\t\t\tif (attr['dota-render'] && attr.expand) {\n\t\t\t\t\tvar attrArray = [];\n\t\t\t\t\t//attach data-X attr, and scope-X attr\n\t\t\t\t\tfor(x in attr) {\n\t\t\t\t\t\tif (!x.indexOf('data-')) {\n\t\t\t\t\t\t\tattrArray.push('\"' + x.slice(5) + '\":\"' + attr[x] + '\"');\n\t\t\t\t\t\t} else if (!x.indexOf('scope-')) {\n\t\t\t\t\t\t\tattrArray.push('\"' + x.slice(6) + '\":S[\"' + attr[x] + '\"]');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tFnText += indent(level) + 'var P={' + attrArray.join(',') + '},U=\"' + attr['dota-render'] + '\";\\n';\n\t\t\t\t\t//only expand if renderFn is ready in cache, but not in cache-dom (which unneeded)\n\t\t\t\t\tFnText += indent(level) + 'if(typeof doTA.C[U]!==\"undefined\"&&typeof doTA.D[U]===\"undefined\"){' +\n\t\t\t\t\t\t'R+=doTA.C[U](S,F,P)}; \\n';\n\t\t\t\t}\n\n\t\t\t\tlevel++;\n\t\t\t},\n\n\t\t\t//void tag no need to write closing tag\n\t\t\tvoidTag: function() {\n\t\t\t\tlevel--;\n\n\t\t\t\tif (diffLevel === 2 && level === ngIfLevel && ngIfLevelMap[ngIfLevel] >= 0) {\n\t\t\t\t\t// console.log('ngIfLevelMap1', ngIfLevel, ngIfLevels, ngIfLevelMap);\n\t\t\t\t\tif (ngIfLevelMap[ngIfLevel]) {\n\t\t\t\t\t\tFnText += indent(level, 1) + \"}else{\" +\n\t\t\t\t\t\t\t\"R+='<span id=\\\"'+N+'.\" + uniqueId + '\" hidden=\"\"></span>\\';' +\n\t\t\t\t\t\t\t\"N+=\" + ngIfLevelMap[ngIfLevel] + \";}; \\n\";\n\t\t\t\t\t}\n\t\t\t\t\t//save counter\n\t\t\t\t\tngIfCounterTmp = ngIfLevelMap[ngIfLevel];\n\t\t\t\t\t//clear counter\n\t\t\t\t\tngIfLevelMap[ngIfLevel] = void 0;\n\t\t\t\t\t//remove last level\n\t\t\t\t\tngIfLevel = ngIfLevels[--ngIfLevels.length - 1];\n\t\t\t\t\t//add up to previous level\n\t\t\t\t\tif (ngIfLevel) {\n\t\t\t\t\t\tngIfLevelMap[ngIfLevel] += ngIfCounterTmp;\n\t\t\t\t\t}\n\t\t\t\t\t// console.log('ngIfLevelMap2', ngIfLevel, ngIfLevels, ngIfLevelMap);\n\t\t\t\t\tif (LevelMap[level] > 0) {\n\t\t\t\t\t\tLevelMap[level]--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//close \"if\", \"for\", \"while\" blocks\n\t\t\t\t//while is needed because loop and if can be in same tag\n\t\t\t\twhile (LevelMap[level] > 0) {\n\t\t\t\t\tFnText += indent(level, 1) + '}\\n';\n\t\t\t\t\tLevelMap[level]--;\n\t\t\t\t}\n\n\t\t\t\t//clear ng-repeat $index\n\t\t\t\tif (ngRepeatLevel === level) {\n\t\t\t\t\tLevelVarMap[level] = 0;\n\t\t\t\t\twhile (ngRepeatLevel >=0 && typeof LevelVarMap[--ngRepeatLevel] === 'undefined') {}\n\t\t\t\t}\n\n\t\t\t\t//reset dota-pass when out of scope\n\t\t\t\tif (doTAPass >= level) {\n\t\t\t\t\tdoTAPass = void 0;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//close tag\n\t\t\tcloseTag: function(tagName) {\n\t\t\t\tlevel--;\n\n\t\t\t\t//just write closing tag back\n\t\t\t\tFnText += indent(level) + \"R+='</\" + tagName + \">';\\n\";\n\n\t\t\t\t//ngIfCounter for most possible uniqueId generation; don't work with loop inside!\n\t\t\t\tif (diffLevel === 2 && level === ngIfLevel && ngIfLevelMap[ngIfLevel] >= 0) {\n\t\t\t\t\t// console.log('ngIfLevelMap1', ngIfLevel, ngIfLevels, ngIfLevelMap);\n\t\t\t\t\tif (ngIfLevelMap[ngIfLevel]) {\n\t\t\t\t\t\tFnText += indent(level, 1) + \"}else{\" +\n\t\t\t\t\t\t\t\"R+='<\" + tagName + \" id=\\\"'+N+'.\" + uniqueId + '\" hidden=\"\" ' +\n\t\t\t\t\t\t\t(tagName === 'img' || tagName === 'input' || tagName === 'br' || tagName === 'hr' ?\n\t\t\t\t\t\t\t'/>' : '></' + tagName + '>') + '\\';' +\n\t\t\t\t\t\t\t\"N+=\" + ngIfLevelMap[ngIfLevel] + \"} \\n\";\n\t\t\t\t\t}\n\t\t\t\t\t//save counter\n\t\t\t\t\tngIfCounterTmp = ngIfLevelMap[ngIfLevel];\n\t\t\t\t\t//clear counter\n\t\t\t\t\tngIfLevelMap[ngIfLevel] = void 0;\n\t\t\t\t\t//remove last level\n\t\t\t\t\tngIfLevel = ngIfLevels[--ngIfLevels.length - 1];\n\t\t\t\t\t//add up to previous level\n\t\t\t\t\tif (ngIfLevel) {\n\t\t\t\t\t\tngIfLevelMap[ngIfLevel] += ngIfCounterTmp;\n\t\t\t\t\t}\n\t\t\t\t\t// console.log('ngIfLevelMap2', ngIfLevel, ngIfLevels, ngIfLevelMap);\n\t\t\t\t\tif (LevelMap[level] > 0) {\n\t\t\t\t\t\tLevelMap[level]--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// console.log('LevelMap1', LevelMap);\n\t\t\t\t//close \"if\", \"for\", \"while\" blocks\n\t\t\t\twhile (LevelMap[level] > 0) {\n\t\t\t\t\tFnText += indent(level, 1) + '}\\n';\n\t\t\t\t\tLevelMap[level]--;\n\t\t\t\t}\n\t\t\t\t// console.log('LevelMap2', LevelMap);\n\n\t\t\t\tif (diffLevel) {\n\t\t\t\t\tif (level === skipLevel) {\n\t\t\t\t\t\t// console.log('ngIfLevel', [level, skipLevel, ngRepeatLevel])\n\t\t\t\t\t\tFnText += indent(level, 1) + 'N=O' + level + '; \\n';\n\t\t\t\t\t}\n\t\t\t\t\tif (level === skipLevel) {\n\t\t\t\t\t\tskipLevel = void 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//clear ng-repeat $index\n\t\t\t\tif (ngRepeatLevel === level) {\n\t\t\t\t\tLevelVarMap[level] = 0;\n\t\t\t\t\twhile (ngRepeatLevel >=0 && typeof LevelVarMap[--ngRepeatLevel] === 'undefined') {}\n\t\t\t\t}\n\n\t\t\t\t//add blank node if $watch block return nothing, mostly occur with ng-if\n\t\t\t\tif (WatchMap[level]) {\n\t\t\t\t\tFnText += indent(level, 1) +\n\t\t\t\t\t\t\"R=R||('<\" + tagName + ' id=\"' + idHash[uniqueId + '.' + level] +\n\t\t\t\t\t\t'\" style=\"display:none\"></' + tagName + '>\\');\\n';\n\t\t\t\t\tWatchMap[level] = 0;\n\t\t\t\t\tFnText += indent(level, 2) + 'return R;}; \\n';\n\t\t\t\t\tFnText += indent(level, 2) + 'R+=W.F(S,F,' + (options.params ? '$attr': '0') + ',0,N); \\n';\n\t\t\t\t}\n\n\t\t\t\t//reset dota-pass when out of scope\n\t\t\t\tif (doTAPass >= level) {\n\t\t\t\t\tdoTAPass = void 0;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t//text node\n\t\t\ttext: function(text) {\n\t\t\t\t//console.log([text]);\n\t\t\t\tFnText += indent(level) + ('R+=\\'' + interpolate(text) + '\\';\\n')\n\t\t\t\t\t.replace(/\\+''|''\\+/g,'');\n\t\t\t},\n\n\t\t\t//comment node\n\t\t\tcomment: function(data) {\n\t\t\t\tif (options.comment !== 0) {\n\t\t\t\t\t//console.log(111,[data]);\n\t\t\t\t\tFnText += indent(level) + \"R+='<\" + escapeSingleQuote(data) + \">';\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (watchDiff && diffLevel !== 0) {\n\t\t\t//http://jsperf.com/hasownproperty-vs-in-vs-undefined/87\n\t\t\tFnText += indent(0) + 'if(X&&typeof doTA.H[' + uniqueId + ']!==\"undefined\"){doTA.diff' + (diffLevel || '') +\n\t\t\t\t'(' + uniqueId + ',R)}' +\n\t\t\t\t'doTA.H[' + uniqueId + ']=R;\\n';\n\t\t}\n\n\t\tFnText += indent(0) +'return R;\\n';\n\n\t\t//Default Optimization\n\t\t// - concat possible lines for performance\n\t\tFnText = FnText.replace(/;R\\+=/g,'+').replace(/'\\+'/g,'');\n\n\t\t//extra optimization, which might take some more CPU\n\t\tif (options.optimize && !watchDiff) {\n\t\t\tFnText = FnText.replace(removeUnneededQuotesRegex,'$1$2');\n\t\t}\n\n\t\t//print the whole function if debug\n\t\tif (options.debug) {\n\t\t\t/**/console.log(FnText);\n\t\t}\n\t\t// console.log(FnText);\n\n\t\ttry {\n\t\t\t/*jshint evil: true */\n\t\t\tif (watchDiff || diffLevel) {\n\t\t\t\t//$scope, $filter, $attr, isPatch, IdCounter, isKey, LoopIdCounter\n\t\t\t\tcompiledFn = new Function('S', 'F', '$attr', 'X', 'N', 'K', 'M', FnText);\n\t\t\t} else if (options.params) {\n\t\t\t\tcompiledFn = new Function('S', 'F', '$attr', FnText);\n\t\t\t} else {\n\t\t\t\tcompiledFn = new Function('S', 'F', FnText);\n\t\t\t}\n\t\t\t/*jshint evil: false */\n\t\t\tif (Watched) {\n\t\t\t\tcompiledFn = {W:[], F: compiledFn};\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (typeof console !== \"undefined\") {\n\t\t\t\t/**/console.log(\"doTA compile error:\\n\" + FnText);\n\t\t\t}\n\t\t\tthrow err;\n\t\t}\n\n\t\t// just for less array usage on heap profiling\n\t\t// but this may trigger GC more\n\t\tFnText = LevelMap = LevelVarMap = VarMap = ngIfLevels = ngIfLevelMap = WatchMap = idHash = void 0;\n\t\treturn compiledFn;\n\t}\n\n\tvar compiledHash = {};\n\tvar lastId = 0;\n\n\tfunction initCompileHash(obj) {\n\t\tfor (var x in obj) {\n\t\t\tcompiledHash[x] = obj[x];\n\t\t\tif (obj[x] > lastId) {\n\t\t\t\tlastId = obj[x];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getUniqueId(key) {\n\t\tif (key) {\n\t\t\tif (compiledHash[key]) {\n\t\t\t\treturn compiledHash[key];\n\t\t\t} else {\n\t\t\t\tcompiledHash[key] = lastId;\n\t\t\t\treturn lastId++;\n\t\t\t}\n\t\t} else {\n\t\t\treturn lastId++;\n\t\t}\n\t}\n\n\t//warm-up most used functions\n\tdoTA.compile('<div class=\"x {{x}}\" ng-class=\"{x:1}\" ng-repeat=\"x in y\" ng-if=\"x\" ng-value=\"x\" ng-disabled=\"0\">x{{x}}</div><!--x--><div ng-repeat=\"k,v in y\">{{v|json:4}}</div>', {\n\t\tdotaRender: 1});\n\tdoTA.compile('<div class=\"x {{x}}\" ng-class=\"{x:1}\" ng-repeat=\"x in y\" ng-if=\"x\" ng-value=\"x\" ng-disabled=\"0\">x{{x}}</div><!--x--><div ng-repeat=\"x in 1:10:2\">{{x}}</div>', {\n\t\twatchDiff: 1, dotaRender: 1});\n\tdoTA.compile('<div class=\"x {{x}}\" ng-class=\"{x:1}\" ng-repeat=\"x in y\" ng-if=\"x\" ng-value=\"x\" ng-disabled=\"0\">x{{x}}</div><!--x-->', {\n\t\twatchDiff: 1, diffLevel: 2, dotaRender: 1});\n\tdoTA.compile('<div class=\"x {{x}}\" ng-class=\"{x:1}\" ng-repeat=\"x in y\" ng-if=\"x\" ng-value=\"x\" ng-disabled=\"0\">x{{x}}</div><!--x-->', {\n\t\twatchDiff: 1, diffLevel: 3, dotaRender: 1});\n\n\treturn doTA;\n})();\n\nif (typeof module !== \"undefined\" && module.exports) {\n\tmodule.exports = doTA;\n//IE8\n} else if (typeof console === \"undefined\") {\n\tvar noop = function() {};\n\tvar console = {log: noop, time: noop, timeEnd: noop};\n}\n\n/* global angular, doTA */\n(function (angular, document) {'use strict';\n\tvar msie = document.documentMode;\n\tvar ie8 = msie <= 8;\n\tvar textContent = ie8 ? 'innerText' : 'textContent';\n\tvar listenerName = ie8 ? 'attachEvent' : 'addEventListener';\n\tvar hiddenDIV;\n\tsetTimeout(function(){\n\t\tif (document.createElement) {\n\t\t\thiddenDIV = document.createElement('div');\n\t\t}\n\t},0);\n\tvar BoolMap = {0: 0, 'false': 0, 1: 1, 'true': 1};\n\tfunction makeBool(attr, defaultValue){\n\t\treturn attr in BoolMap ? BoolMap[attr] : attr || defaultValue;\n\t}\n\n\tfunction forEachArray(src, iter, ctx) {\n\t\tif (!src) { return; }\n\t\tif (src.forEach) {\n\t\t\treturn src.forEach(iter);\n\t\t}\n\t\tfor (var key = 0, length = src.length; key < length; key++) {\n\t\t\titer.call(ctx, src[key], key);\n\t\t}\n\t}\n\n\t//retrieve nested value from object, support a.b or a[b]\n\tfunction resolveObject(path, obj) {\n\t\tif (path.indexOf('.') >= 0 || path.indexOf('[') >= 0) {\n\t\t\tvar chunks = path.replace(/[\\]]$/, '').split(/[.\\[\\]\"']+/g);\n\t\t\treturn chunks.reduce(function (prev, curr) {\n\t\t\t\treturn prev ? prev[curr] : undefined;\n\t\t\t}, obj);\n\t\t} else {\n\t\t\treturn obj[path];\n\t\t}\n\t}\n\n\t//get nested value as assignable fn like $parse.assign\n\tfunction parseObject(path, obj) {\n\t\tif (path.indexOf('.') >= 0 || path.indexOf('[') >= 0) {\n\t\t\tvar chunks = path.replace(/[\\]]$/, '').split(/[.\\[\\]\"']+/g);\n\t\t\tpath = chunks.splice(-1, 1)[0];\n\t\t\t// console.log('path, last', chunks, path)\n\t\t\tobj = chunks.reduce(function (prev, curr) {\n\t\t\t\t// console.log('parseObject', [prev, curr])\n\t\t\t\tif (!prev[curr]) {\n\t\t\t\t\tprev[curr] = {};\n\t\t\t\t}\n\t\t\t\treturn prev[curr];\n\t\t\t}, obj);\n\t\t}\n\t\treturn {\n\t\t\tassign: function(val) {\n\t\t\t\tobj[path] = val;\n\t\t\t}\n\t\t};\n\t}\n\n\t// var obj = {};\n\t// var parsed = parseObject('name', obj);\n\t// parsed.assign('test');\n\t// console.log(obj);\n\t// parsed = parseObject('three.one', obj);\n\t// parsed.assign('haha');\n\t// console.log(obj);\n\n\t//debounce for events like resize\n\tfunction debounce(fn, timeout) {\n\t\tif (timeout === undefined) {\n\t\t\ttimeout = 500;\n\t\t}\n\t\tvar timeoutId;\n\t\tvar args, thisArgs;\n\t\tfunction debounced() {\n\t\t\tfn.apply(thisArgs, args);\n\t\t}\n\t\treturn function() {\n\t\t\targs = arguments;\n\t\t\tthisArgs = this;\n\t\t\tif (timeoutId) {\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t}\n\t\t\t// console.log('debounce: new timer', [timer]);\n\t\t\ttimeoutId = setTimeout(debounced, timeout);\n\t\t};\n\t}\n\tdoTA.debounce = debounce;\n\n\t//throttle for events like input\n\tfunction throttle(fn, timeout) {\n\t\tif (timeout === undefined) {\n\t\t\ttimeout = 200;\n\t\t}\n\t\tvar timeoutId;\n\t\tvar start = +new Date(), now;\n\t\t// console.log('timeout', timeout)\n\t\tvar args, thisArgs;\n\t\tfunction throttled() {\n\t\t\tfn.apply(thisArgs, args);\n\t\t}\n\t\treturn function() {\n\t\t\targs = arguments;\n\t\t\tthisArgs = this;\n\t\t\tnow = +new Date();\n\t\t\tif (timeoutId) {\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t}\n\t\t\tif (now - start >= timeout) {\n\t\t\t\t// console.log(now - start)\n\t\t\t\tstart = now;\n\t\t\t\tthrottled();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// console.log('throttled: new timer', [timer]);\n\t\t\ttimeoutId = setTimeout(throttled, timeout);\n\t\t};\n\t}\n\tdoTA.throttle = throttle; //export\n\n\t//hide and destroy children\n\tfunction destroyChildren(elem) {\n\t\tvar child = elem.firstChild, hiddenTags = [];\n\t\tif (child) {\n\t\t\tchild.hidden = 1;\n\t\t\thiddenTags.push(child);\n\t\t\twhile ((child = child.nextSibling)) {\n\t\t\t\tchild.hidden = 1;\n\t\t\t\thiddenTags.push(child);\n\t\t\t}\n\t\t}\n\t\t//destroying children block everything\n\t\t// so do it later, since deleting don't have to be synchronous\n\t\tsetTimeout(function(){\n\t\t\tconsole.time('removeChild');\n\t\t\tforEachArray(hiddenTags, function(child) {\n\t\t\t\tif (child && child.parentNode) {\n\t\t\t\t\tchild.parentNode.removeChild(child);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconsole.timeEnd('removeChild');\n\t\t});\n\t}\n\n\tfunction eventHandlerFn(scope, expr) {\n\t\treturn function(evt){\n\t\t\tif (ie8) {\n\t\t\t\t//make $event.target always available\n\t\t\t\tevt.target = evt.srcElement || document;\n\t\t\t\tevt.returnValue = false;\n\t\t\t\tevt.cancelBubble = true;\n\t\t\t} else {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tevt.stopPropagation();\n\t\t\t}\n\n\t\t\t// if (scope.$evalAsync) {\n\t\t\t\t//isedom: disallow, so no $target here\n\t\t\t\tscope.$evalAsync(expr, {$event: evt});\n\t\t\t// } else {\n\t\t\t//\t scope.$event = evt;\n\t\t\t//\t // var locals = {$event: evt};\n\t\t\t//\t var fn = new Function('with(this){' + expr + '}');\n\t\t\t//\t console.log('eventHandlerFn', fn, scope);\n\t\t\t//\t fn.apply(scope);\n\t\t\t// }\n\t\t};\n\t}\n\n\tfunction addEventUnknown(partial, scope, attrs) {\n\t\tif (partial.de) { return; } //only attach events once\n\t\tpartial.de = 1;\n\t\tvar attributes = partial.attributes, attrName, attrVal;\n\t\t// console.log('attributes', attributes);\n\t\tfor(var i = 0, l = attributes.length; i < l; i++) {\n\t\t\tif (!attributes[i] || !attributes[i].name || !attributes[i].value) { continue; }\n\t\t\tattrName = attributes[i].name;\n\t\t\tattrVal = attributes[i].value;\n\t\t\tif (attrName.substr(0, 3) === 'de-') {\n\t\t\t\t//remove attribute, so never bind again\n\t\t\t\tpartial[listenerName]((ie8 ? 'on' : '') + attrName.substr(3),\n\t\t\t\t\teventHandlerFn(scope, attrVal));\n\t\t\t\t// console.log('event added', uniqueId, attrName);\n\t\t\t}\n\t\t}\n\t}\n\n\t//specified events\n\tfunction addEventKnown(partial, scope, attrs) {\n\t\tif (partial.ded) { return; } //only attach events once\n\t\tpartial.ded = 1;\n\t\tvar attrName, attrVal;\n\n\t\tvar events = attrs.events;\n\t\t// console.log('attributes', attributes);\n\t\tfor(var i = 0, l = events.length; i < l; i++) {\n\t\t\tattrName = 'de-' + events[i];\n\t\t\tattrVal = partial.getAttribute(attrName);\n\t\t\t// console.log(i, [attrVal, events[i]])\n\t\t\tif (!attrVal) { continue; }\n\t\t\tpartial[listenerName]((ie8 ? 'on' : '') + events[i],\n\t\t\t\teventHandlerFn(scope, attrVal));\n\t\t}\n\t}\n\n\tfunction addEvents(elem, scope, attrs) {\n\t\t//getElementsByClassName is faster than querySelectorAll\n\t\t//http://jsperf.com/queryselectorall-vs-getelementsbytagname/20\n\t\t// console.time('find-nodes:');\n\t\tvar elements = ie8 ? elem.querySelectorAll('.de') : elem.getElementsByClassName('de');\n\t\tvar i;\n\t\t// console.timeEnd('find-nodes:');\n\t\tif (typeof attrs.event === 'number') {\n\t\t\tfor (i = 0, l = elements.length; i < l; i++) {\n\t\t\t\taddEventUnknown(elements[i], scope, attrs);\n\t\t\t}\n\t\t} else {\n\t\t\tattrs.events = attrs.event.split(' ');\n\t\t\tfor (i = 0, l = elements.length; i < l; i++) {\n\t\t\t\taddEventKnown(elements[i], scope, attrs);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addNgModels(elem, scope, uniqueId) {\n\t\tforEachArray(elem.querySelectorAll('[dota-model]'), function(partial) {\n\t\t\tvar dotaPass = partial.getAttribute('dota-pass');\n\t\t\t// console.log('dotaPass', [dotaPass]);\n\t\t\tif (dotaPass != undefined) { return; } //null or undefined\n\n\t\t\tvar modelName = partial.getAttribute('dota-model');\n\n\t\t\t//textbox default event is input unless IE8, all others are change event\n\t\t\tvar updateOn = partial.getAttribute('update-on') ||\n\t\t\t\t(partial.type !== 'text' || ie8 ? 'change' : 'input');\n\t\t\tvar throttleVal = +partial.getAttribute('throttle') || 100;\n\n\t\t\t//use checked property for checkbox and radio\n\t\t\tvar bindProp = partial.getAttribute('bind-prop') ||\n\t\t\t\t((partial.type === 'checkbox' || partial.type === 'radio') && 'checked');\n\t\t\tvar curValue = resolveObject(modelName, scope);\n\n\t\t\t// console.log('partial', [partial.tagName, partial.type, curValue, partial.value]);\n\t\t\tif (bindProp) {\n\t\t\t\t//set true or false on dom properties\n\t\t\t\tpartial[bindProp] = partial.value == curValue; // loose compare\n\t\t\t} else {\n\t\t\t\tif (typeof curValue !== 'undefined') {\n\t\t\t\t\tpartial.value = curValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//bind each events\n\t\t\tvar parsed;\n\t\t\tforEachArray(updateOn.split(' '), function(evtName){\n\t\t\t\tevtName = evtName.trim();\n\t\t\t\tpartial.addEventListener(evtName, throttle(function(evt) {\n\t\t\t\t\tif (!parsed) {\n\t\t\t\t\t\tparsed = parseObject(modelName, scope);\n\t\t\t\t\t}\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tevt.stopPropagation();\n\n\t\t\t\t\t// console.log('event', evtName, evt.target, [evt.target[bindProp || 'value']])\n\t\t\t\t\tscope.$applyAsync((function(){\n\t\t\t\t\t\tif (bindProp) {\n\t\t\t\t\t\t\tparsed.assign(bindProp && evt.target[bindProp] ? evt.target.value : undefined);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsed.assign(evt.target.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}, throttleVal));\n\t\t\t});\n\t\t});\n\t}\n\n\tangular.module('doTA', [])\n\t\t.config(['$provide',function(P) {\n\t\t\tP.factory('doTA', function(){\n\t\t\t\tdoTA.addEvents = addEvents;\n\t\t\t\tdoTA.addNgModels = addNgModels;\n\t\t\t\treturn doTA;\n\t\t\t});\n\t\t}])\n\n\t\t.directive('dotaRender', ['doTA', '$http', '$filter', '$templateCache', '$compile', '$controller',\n\t\t\tfunction(doTA, $http, $filter, $templateCache, $compile, $controller) {\n\t\t\tvar scopes = {}; //scope management\n\n\t\t\treturn {\n\t\t\t\trestrict: 'A',\n\t\t\t\tpriority: 10000,\n\t\t\t\tterminal: true,\n\t\t\t\tcontroller: angular.noop,\n\t\t\t\tlink: angular.noop,\n\t\t\t\tcompile: function() {\n\t\t\t\t\tvar Watchers = [], BindValues = {};\n\n\t\t\t\t\treturn function($scope, elem, attrs) {\n\t\t\t\t\t\t//used attributes, good for minification with closure compiler;\n\t\t\t\t\t\tvar attrCacheDOM = attrs.cacheDom;\n\t\t\t\t\t\tvar attrDoTARender = attrs.dotaRender;\n\t\t\t\t\t\tvar attrScope = attrs.scope;\n\t\t\t\t\t\tvar attrNgController = attrs.ngController;\n\t\t\t\t\t\tvar attrLoose = attrs.loose;\n\t\t\t\t\t\tvar attrEvent = attrs.event;\n\t\t\t\t\t\tvar attrDebug = attrs.debug;\n\t\t\t\t\t\tvar attrWatch = attrs.watch;\n\t\t\t\t\t\tvar attrCompile = attrs.compile;\n\t\t\t\t\t\tvar attrModel = attrs.model;\n\t\t\t\t\t\tvar attrBind = attrs.bind;\n\t\t\t\t\t\tvar attrCompileAll = attrs.compileAll;\n\t\t\t\t\t\tvar attrDoTAOnload = attrs.dotaOnload;\n\t\t\t\t\t\tvar attrDoTAOnloadScope = attrs.dotaOnloadScope;\n\t\t\t\t\t\tvar attrLoaded = attrs.loaded;\n\t\t\t\t\t\tvar attrInline = attrs.inline;\n\t\t\t\t\t\tvar attrWatchDiff = attrs.watchDiff;\n\t\t\t\t\t\tvar origAttrMap = attrs.$attr;\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tvar NewScope;\n\n\t\t\t\t\t\tattrs.loose = makeBool(attrLoose, 1); //if set, falsy => ''\n\t\t\t\t\t\tattrs.optimize = makeBool(attrs.optimize, 0);\n\t\t\t\t\t\tattrs.comment = makeBool(attrs.comment, 1); //if 0, remove comments\n\t\t\t\t\t\tattrDebug = attrs.debug = makeBool(attrDebug, 0);\n\t\t\t\t\t\tattrEvent = attrs.event = makeBool(attrEvent, 1); //ng-click to native click\n\t\t\t\t\t\tif (attrs.diffLevel) {\n\t\t\t\t\t\t\tattrs.diffLevel = +attrs.diffLevel;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tattrWatch = attrs.watch = typeof attrWatch === 'string' ? attrWatch : 0; //Firefox throw error if does not exists\n\n\t\t\t\t\t\t//to prevent angular binding this\n\t\t\t\t\t\tif (attrNgController) {\n\t\t\t\t\t\t\telem[0].removeAttribute('ng-controller');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (attrCacheDOM && doTA.D[attrDoTARender]) {\n\t\t\t\t\t\t\t// alert( doTA.D[attrDoTARender].innerHTML);\n\t\t\t\t\t\t\tconsole.log('cacheDOM: just moved cached DOM', doTA.D[attrDoTARender]);\n\t\t\t\t\t\t\tvar cachedElem = msie ? doTA.D[attrDoTARender].cloneNode(true) : doTA.D[attrDoTARender];\n\t\t\t\t\t\t\telem[0].parentNode.replaceChild(cachedElem, elem[0]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//attributes on dota-render tags to be accessiable as $attr in templates\n\t\t\t\t\t\tfor (var x in origAttrMap) {\n\t\t\t\t\t\t\tvar z = origAttrMap[x];\n\t\t\t\t\t\t\t//map data-* attributes into origAttrMap (inline text)\n\t\t\t\t\t\t\tif (!z.indexOf('data-')) {\n\t\t\t\t\t\t\t\tparams[z.slice(5)] = attrs[x];\n\t\t\t\t\t\t\t\tattrs.params = 1;\n\t\t\t\t\t\t\t//map scope-* attributes into origAttrMap (first level var from scope)\n\t\t\t\t\t\t\t} else if (!z.indexOf('scope-')) {\n\t\t\t\t\t\t\t\tattrs.params = 1;\n\t\t\t\t\t\t\t\tif (attrs[x].indexOf('.') >= 0 || attrs[x].indexOf('[') >= 0) {\n\t\t\t\t\t\t\t\t\tif (attrs[x].indexOf('$index') > 0) {\n\t\t\t\t\t\t\t\t\t\tparams[z.slice(6)] = $scope.$eval(attrs[x]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tparams[z.slice(6)] = resolveObject(attrs[x], $scope);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparams[z.slice(6)] = $scope[attrs[x]];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//create new scope if scope=1 or ng-controller is specified\n\t\t\t\t\t\tif (attrScope || attrNgController) {\n\t\t\t\t\t\t\tconsole.log('scope', attrScope, elem, elem.scope());\n\n\t\t\t\t\t\t\t//$destroy previously created scope or will leak.\n\t\t\t\t\t\t\tif (scopes[attrDoTARender]) {\n\t\t\t\t\t\t\t\tscopes[attrDoTARender].$destroy();\n\t\t\t\t\t\t\t\t// /**/console.log('newScope $destroy', attrDoTARender, NewScope);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tNewScope = scopes[attrDoTARender] = $scope.$new();\n\t\t\t\t\t\t\t// /**/console.log('newScope created', attrDoTARender, NewScope);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tNewScope = $scope;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//attach ng-controller, and remove attr to prevent angular running again\n\t\t\t\t\t\tif (attrNgController) {\n\t\t\t\t\t\t\tvar asPos = attrNgController.indexOf(' as ');\n\t\t\t\t\t\t\tif (asPos > 0) {\n\t\t\t\t\t\t\t\tattrNgController = attrNgController.substr(0, asPos).trim();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log('new controller', attrNgController);\n\t\t\t\t\t\t\tvar l = {$scope: NewScope}, controller = $controller(attrNgController, l);\n\t\t\t\t\t\t\t//untested controller-as attr or as syntax\n\t\t\t\t\t\t\tif (attrs.controllerAs || asPos > 0) {\n\t\t\t\t\t\t\t\tNewScope[attrs.controllerAs || attrNgController.substr(asPos + 4).trim()] = controller;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telem.data('$ngControllerController', controller);\n\t\t\t\t\t\t\telem.children().data('$ngControllerController', controller);\n\t\t\t\t\t\t\tconsole.log('new controller created', attrDoTARender);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// watch and re-render the whole template when change\n\t\t\t\t\t\tif(attrWatch) {\n\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'registering watch for', attrWatch);\n\t\t\t\t\t\t\tvar oneTimePos = attrWatch.indexOf('::');\n\t\t\t\t\t\t\tif (oneTimePos >= 0) {\n\t\t\t\t\t\t\t\tattrWatch = attrWatch.slice(oneTimePos + 2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar oneTimeExp = NewScope.$watchCollection(attrWatch, function(newVal, oldVal){\n\t\t\t\t\t\t\t\tif(newVal !== undefined && newVal !== oldVal && doTA.C[attrDoTARender]) {\n\t\t\t\t\t\t\t\t\tif (oneTimePos >= 0) oneTimeExp();\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'watch before render');\n\t\t\t\t\t\t\t\t\trender(doTA.C[attrDoTARender]);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'watch after render');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// watch and partially render by diffing. diff-level = 2 may be used to patch children\n\t\t\t\t\t\tif(attrWatchDiff) {\n\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'registering diff watch for', attrWatchDiff);\n\t\t\t\t\t\t\tNewScope.$watchCollection(attrWatchDiff, function(newVal, oldVal){\n\t\t\t\t\t\t\t\tif(newVal !== oldVal && doTA.C[attrDoTARender]) {\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'diff watch before render');\n\t\t\t\t\t\t\t\t\trender(doTA.C[attrDoTARender], true);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'diff watch after render');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// run the loader\n\t\t\t\t\t\tloader();\n\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\t// cache-dom for static html, $scope will not be triggered\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\tfunction cacheDOM(){\n\t\t\t\t\t\t\t// console.log('cacheDOM()', attrs)\n\t\t\t\t\t\t\t$scope.$on(\"$destroy\", function(){\n\t\t\t\t\t\t\t\tconsole.log('$destroy', elem);\n\t\t\t\t\t\t\t\t// alert(['$destroy', elem[0], hiddenDIV]);\n\t\t\t\t\t\t\t\tif (hiddenDIV) {\n\t\t\t\t\t\t\t\t\tdoTA.D[attrDoTARender] = elem[0];\n\t\t\t\t\t\t\t\t\thiddenDIV.appendChild(elem[0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\t// doTA.compile and return compiledFn\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\tfunction compile(template) {\n\t\t\t\t\t\t\tif(attrDebug) {\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender + ':' + template);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconsole.log(attrDoTARender,'before compile');\n\t\t\t\t\t\t\tvar compiledFn;\n\t\t\t\t\t\t\t//compile the template html text to function like doT does\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconsole.time('compile:' + attrDoTARender);\n\t\t\t\t\t\t\t\tcompiledFn = doTA.compile(template, attrs);\n\t\t\t\t\t\t\t\tconsole.timeEnd('compile:'\t+ attrDoTARender);\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'after compile(no-cache)');\n\t\t\t\t\t\t\t} catch (x) {\n\t\t\t\t\t\t\t\t/**/console.log('compile error', attrs, template);\n\t\t\t\t\t\t\t\tthrow x;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//compiled func into cache for later use\n\t\t\t\t\t\t\tif (attrDoTARender) {\n\t\t\t\t\t\t\t\tdoTA.C[attrDoTARender] = compiledFn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn compiledFn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\t// attach ng-bind\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\tfunction addNgBind(rawElem, scope, attrDoTARender) {\n\t\t\t\t\t\t\t//ToDo: check Watchers scope\n\t\t\t\t\t\t\twhile (Watchers.length) {\n\t\t\t\t\t\t\t\tWatchers.pop()();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tforEachArray(rawElem.querySelectorAll('[dota-bind]'), function(partial) {\n\t\t\t\t\t\t\t\t//override ng-bind\n\t\t\t\t\t\t\t\tvar bindExpr = partial.getAttribute('dota-bind');\n\t\t\t\t\t\t\t\tvar oneTimePos = bindExpr.indexOf('::');\n\t\t\t\t\t\t\t\tif (oneTimePos >= 0) {\n\t\t\t\t\t\t\t\t\tbindExpr = bindExpr.slice(oneTimePos + 2);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (BindValues[bindExpr]) {\n\t\t\t\t\t\t\t\t\tpartial.innerHTML = BindValues[bindExpr];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar oneTimeExp = scope.$watchCollection(bindExpr, function(newVal, oldVal){\n\t\t\t\t\t\t\t\t\tif (newVal && oneTimePos >= 0) { oneTimeExp(); }\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'watch before bindExpr', [newVal, oldVal]);\n\t\t\t\t\t\t\t\t\tpartial[textContent] = BindValues[bindExpr] = newVal || '';\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'watch after render');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tWatchers.push(oneTimeExp);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\t// attach ng-model, events, ng-bind, and $compile\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\tfunction attachEventsAndCompile(rawElem, scope) {\n\n\t\t\t\t\t\t\tif (attrModel) {\n\t\t\t\t\t\t\t\tconsole.time('ngModel:' + attrDoTARender);\n\t\t\t\t\t\t\t\taddNgModels(rawElem, scope, attrDoTARender);\n\t\t\t\t\t\t\t\tconsole.timeEnd('ngModel:' + attrDoTARender);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//attach events before replacing\n\t\t\t\t\t\t\tif (attrEvent) {\n\t\t\t\t\t\t\t\tconsole.time('ng-events:' + attrDoTARender);\n\t\t\t\t\t\t\t\taddEvents(rawElem, scope, attrs);\n\t\t\t\t\t\t\t\tconsole.timeEnd('ng-events:' + attrDoTARender);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//ng-bind\n\t\t\t\t\t\t\tif (attrBind) {\n\t\t\t\t\t\t\t\tconsole.time('ngBind:' + attrDoTARender);\n\t\t\t\t\t\t\t\taddNgBind(rawElem, scope, attrDoTARender);\n\t\t\t\t\t\t\t\tconsole.timeEnd('ngBind:' + attrDoTARender);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//$compile html if you need ng-model or ng-something\n\t\t\t\t\t\t\tif (attrCompile){\n\t\t\t\t\t\t\t\t//partially compile each dota-pass and its childs,\n\t\t\t\t\t\t\t\t// not sure this is suitable if you have so many dota-passes\n\t\t\t\t\t\t\t\tconsole.time('$compile:' + attrDoTARender);\n\t\t\t\t\t\t\t\tforEachArray(rawElem.querySelectorAll('[dota-pass]'), function(partial){\n\t\t\t\t\t\t\t\t\t// console.log('$compile:partial:' + attrDoTARender, partial);\n\t\t\t\t\t\t\t\t\t$compile(partial)(scope);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconsole.timeEnd('$compile:' + attrDoTARender);\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'after $compile partial');\n\n\t\t\t\t\t\t\t} else if (attrCompileAll){\n\t\t\t\t\t\t\t\t//compile child nodes\n\t\t\t\t\t\t\t\tconsole.time('compile-all:' + attrDoTARender);\n\t\t\t\t\t\t\t\t$compile(rawElem.contentDocument || rawElem.childNodes)(scope);\n\t\t\t\t\t\t\t\tconsole.timeEnd('compile-all:' + attrDoTARender);\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'after $compile all');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\t// render the template, cache-dom, run onload scripts, add dynamic watches\n\t\t\t\t\t\t////////////////////////////////////////////////////////////////////////////\n\t\t\t\t\t\tfunction render(func, patch) {\n\n\t\t\t\t\t\t\t//unless prerender\n\t\t\t\t\t\t\tif (func) {\n\t\t\t\t\t\t\t\t//trigger destroying children\n\t\t\t\t\t\t\t\tif (!patch && elem[0].firstChild) {\n\t\t\t\t\t\t\t\t\tdestroyChildren(elem[0]);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'before render', patch);\n\t\t\t\t\t\t\t\t//execute render function against scope, $filter, etc.\n\t\t\t\t\t\t\t\tvar renderedHTML;\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconsole.time('render:' + attrDoTARender);\n\t\t\t\t\t\t\t\t\trenderedHTML = func.F ? func.F(NewScope, $filter, params, patch) : func(NewScope, $filter, params, patch);\n\t\t\t\t\t\t\t\t\tconsole.timeEnd('render:' + attrDoTARender);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'after render', patch);\n\t\t\t\t\t\t\t\t} catch (x) {\n\t\t\t\t\t\t\t\t\t/**/console.log('render error', func);\n\t\t\t\t\t\t\t\t\tthrow x;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif(attrDebug) {\n\t\t\t\t\t\t\t\t\t/* */console.log(attrDoTARender, renderedHTML);\n\t\t\t\t\t\t\t\t\t// console.log(attrDoTARender, (func.F || func).toString());\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// console.log('patch?', [patch]);\n\t\t\t\t\t\t\t\tif (patch) {\n\t\t\t\t\t\t\t\t\tattachEventsAndCompile(elem[0], NewScope);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t//if node has some child, use appendChild\n\t\t\t\t\t\t\t\tif (elem[0].firstChild) {\n\t\t\t\t\t\t\t\t\tconsole.time('appendChild:' + attrDoTARender);\n\t\t\t\t\t\t\t\t\tvar newNode = document.createElement('div'), firstChild;\n\t\t\t\t\t\t\t\t\tnewNode.innerHTML = renderedHTML;\n\n\t\t\t\t\t\t\t\t\t//if needed, attach events and $compile\n\t\t\t\t\t\t\t\t\tattachEventsAndCompile(newNode, NewScope);\n\n\t\t\t\t\t\t\t\t\t//move child from temp nodes\n\t\t\t\t\t\t\t\t\twhile ((firstChild = newNode.firstChild)) {\n\t\t\t\t\t\t\t\t\t\telem[0].appendChild(firstChild);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconsole.timeEnd('appendChild:' + attrDoTARender);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'after appendChild');\n\n\t\t\t\t\t\t\t\t//if node is blank, use innerHTML\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconsole.time('innerHTML:' + attrDoTARender);\n\t\t\t\t\t\t\t\t\telem[0].innerHTML = renderedHTML;\n\t\t\t\t\t\t\t\t\tconsole.timeEnd('innerHTML:' + attrDoTARender);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'after innerHTML');\n\n\t\t\t\t\t\t\t\t\t//if needed, attach events and $compile\n\t\t\t\t\t\t\t\t\tattachEventsAndCompile(elem[0], NewScope);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//attach client side to prerender context\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattachEventsAndCompile(elem[0], NewScope);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//execute raw functions, like jQuery\n\t\t\t\t\t\t\tif(attrDoTAOnload){\n\t\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\t\tvar onLoadFn = new Function(attrDoTAOnload);\n\t\t\t\t\t\t\t\t\tonLoadFn.apply(elem[0]);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'after eval');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//execute scope functions\n\t\t\t\t\t\t\tif(attrDoTAOnloadScope) {\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tNewScope.$evalAsync(attrDoTAOnloadScope);\n\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, 'after scope $evalAsync scheduled');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (attrCacheDOM) {\n\t\t\t\t\t\t\t\tcacheDOM();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//you can now hide raw html before rendering done\n\t\t\t\t\t\t\t// with loaded=false attribute and following css\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t[dota-render][loaded]:not([loaded=true]) {\n\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tif (attrLoaded) {\n\t\t\t\t\t\t\t\telem.attr(\"loaded\",true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//this watch may be dynamically add or remove\n\t\t\t\t\t\t\tif (func && func.W) {\n\t\t\t\t\t\t\t\tconsole.log('func.W watch', attrDoTARender, func.W);\n\t\t\t\t\t\t\t\tvar scopes = {}, watches = {};\n\t\t\t\t\t\t\t\tfor(var i = 0; i < func.W.length; i++) {\n\t\t\t\t\t\t\t\t\tvar w = func.W[i];\n\t\t\t\t\t\t\t\t\t// console.log('watch', w);\n\n\t\t\t\t\t\t\t\t\twatches[w.I] = NewScope.$watchCollection(w.W, (function(w) {\n\t\t\t\t\t\t\t\t\t\treturn function(newVal, oldVal){\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('$watch trigger', [newVal, oldVal]);\n\t\t\t\t\t\t\t\t\t\t\tif (newVal === oldVal && !newVal) { return; }\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, w.W, 'partial watch before render');\n\t\t\t\t\t\t\t\t\t\t\tvar oldTag = document.getElementById(w.I);\n\t\t\t\t\t\t\t\t\t\t\tif (!oldTag) { return console.log('tag not found'); }\n\n\t\t\t\t\t\t\t\t\t\t\t//we don't need new scope here\n\t\t\t\t\t\t\t\t\t\t\tvar content = w.F(NewScope, $filter, params, 0, w.N);\n\t\t\t\t\t\t\t\t\t\t\tif (!content) { return console.log('no contents'); }\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('watch new content', content);\n\t\t\t\t\t\t\t\t\t\t\tvar newTag = angular.element(content);\n\n\t\t\t\t\t\t\t\t\t\t\t//compile only if specified\n\t\t\t\t\t\t\t\t\t\t\tif (w.C) {\n\t\t\t\t\t\t\t\t\t\t\t\t//scope management\n\t\t\t\t\t\t\t\t\t\t\t\tif (scopes[w.I]) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tscopes[w.I].$destroy();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tscopes[w.I] = NewScope.$new();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tattachEventsAndCompile(newTag[0], scopes[w.I] || NewScope);\n\n\t\t\t\t\t\t\t\t\t\t\tangular.element(oldTag).replaceWith(newTag);\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, w.W, 'partial watch content written');\n\t\t\t\t\t\t\t\t\t\t\t//unregister watch if wait once\n\t\t\t\t\t\t\t\t\t\t\tif (w.O) {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, w.W, 'partial watch unregistered');\n\t\t\t\t\t\t\t\t\t\t\t\twatches[w.I]();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(attrDoTARender, w.W, 'partial watch after render');\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t})(w));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction loader(){\n\t\t\t\t\t\t\tif(doTA.C[attrDoTARender]){\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'get compile function from cache');\n\t\t\t\t\t\t\t\t//watch need to redraw, also inline, because inline always hasChildNodes\n\t\t\t\t\t\t\t\tif (elem[0].hasChildNodes() && !attrInline) {\n\t\t\t\t\t\t\t\t\tconsole.log('hasChildNodes', attrDoTARender);\n\t\t\t\t\t\t\t\t\trender();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trender(doTA.C[attrDoTARender]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (attrInline) {\n\t\t\t\t\t\t\t\t// render inline by loading inner html tags,\n\t\t\t\t\t\t\t\t// html entities encoding sometimes need for htmlparser here or you may use htmlparser2 (untested)\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'before get innerHTML');\n\t\t\t\t\t\t\t\tvar v = elem[0].innerHTML;\n\t\t\t\t\t\t\t\tconsole.log(attrDoTARender,'after get innerHTML');\n\t\t\t\t\t\t\t\trender(compile(v, attrs));\n\t\t\t\t\t\t\t} else if (attrDoTARender) { //load real template\n\t\t\t\t\t\t\t\tconsole.log('before $http', attrDoTARender);\n\t\t\t\t\t\t\t\t//server side rendering or miss to use inline attrs?\n\t\t\t\t\t\t\t\tif (elem[0].hasChildNodes()) {\n\t\t\t\t\t\t\t\t\tconsole.log('hasChildNodes', attrDoTARender);\n\t\t\t\t\t\t\t\t\trender();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$http.get(attrDoTARender, {cache: $templateCache}).success(function (v) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('after $http response', attrDoTARender);\n\t\t\t\t\t\t\t\t\t\trender(compile(v, attrs));\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//////////////////////////////////////////////////\n\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t}])\n\t\t.directive('dotaInclude', ['$http', '$templateCache', '$compile', function($http, $templateCache, $compile) {\n\t\t\treturn {\n\t\t\t\trestrict: 'A',\n\t\t\t\tpriority: 10000,\n\t\t\t\tterminal: true,\n\t\t\t\tcompile: function() {\n\t\t\t\t\treturn function(scope, elem, attrs) {\n\t\t\t\t\t\tvar attrCompile = makeBool(attrs.compile, 1);\n\n\t\t\t\t\t\tconsole.log('dotaInclude', attrs.dotaInclude);\n\t\t\t\t\t\t$http.get(attrs.dotaInclude, {cache: $templateCache}).success(function (data) {\n\t\t\t\t\t\t\telem.html(data);\n\t\t\t\t\t\t\tif (attrCompile !== 0) {\n\t\t\t\t\t\t\t\t$compile(elem.contents())(scope);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t}])\n\t\t.directive('dotaTemplate', ['$http', '$templateCache', '$compile', function($http, $templateCache, $compile) {\n\t\t\treturn {\n\t\t\t\trestrict: 'A',\n\t\t\t\tpriority: 10000,\n\t\t\t\tterminal: true,\n\t\t\t\tcompile: function() {\n\t\t\t\t\treturn function(scope, elem, attrs) {\n\t\t\t\t\t\tconsole.log('dotaTemplate - compile', [attrs.dotaTemplate]);\n\t\t\t\t\t\tvar attrCompile = makeBool(attrs.compile, 1);\n\n\t\t\t\t\t\tscope.$watch(attrs.dotaTemplate, function(newVal, oldVal) {\n\t\t\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\t\t\tconsole.log('dotaTemplate', newVal);\n\t\t\t\t\t\t\t\t$http.get(newVal, {cache: $templateCache}).success(function (data) {\n\t\t\t\t\t\t\t\t\telem.html(data);\n\t\t\t\t\t\t\t\t\tif (attrCompile !== 0) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('dotaTemplate $compile', newVal, data);\n\t\t\t\t\t\t\t\t\t\t$compile(elem.contents())(scope);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t}])\n\t\t.factory('dotaHttp', ['$compile', '$http', '$templateCache', '$filter', 'doTA',\n\t\t\tfunction($compile, $http, $templateCache, $filter, doTA) {\n\t\t\treturn function (name, scope, callback, options){\n\t\t\t\toptions = options || {};\n\t\t\t\toptions.loose = 1;\n\t\t\t\t// options.debug = 1;\n\t\t\t\t// /**/console.log('options')\n\n\t\t\t\tif (doTA.C[name]) {\n\t\t\t\t\t// /**/console.log('dotaHttp doTA cache', name);\n\t\t\t\t\tcallback(doTA.C[name](scope, $filter));\n\t\t\t\t} else {\n\t\t\t\t\t// /**/console.log('dotaHttp $http', name);\n\t\t\t\t\t$http.get(name, {cache: $templateCache}).success(function(data) {\n\t\t\t\t\t\t// /**/console.log('dotaHttp response', data);\n\t\t\t\t\t\tdoTA.C[name] = doTA.compile(data, options);\n\t\t\t\t\t\tcallback(doTA.C[name](scope, $filter));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}]);\n\n})(window.angular, window.document);\n"],"sourceRoot":"/source/"}