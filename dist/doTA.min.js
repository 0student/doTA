var doTA=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var e=function(e,n){if(e){var i=e.match(/([<>]|[^<>]+)/g),t=0,r=function(e){return-1===e.indexOf("&")?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,'"')};do if("<"===i[t])if(t++,"/"===i[t][0])n.onclosetag(i[t].slice(1));else if("!"===i[t][0])n.oncomment(i[t]);else{var o,l={},a=i[t],s=a.indexOf(" ");if(-1===s)o=a;else{o=a.slice(0,s);for(var f=a.length;++s<f;){var c=a.indexOf("=",s);if(-1===c){l[a.slice(s)]="";break}var s=a.slice(s,c),d=a[c+1];if('"'===d||"'"===d)d=a.indexOf(d,c+2),c=a.slice(c+2,d),l[s]=r(c),s=d+1;else{if(d=a.indexOf(" ",c+2),-1===d){c=a.slice(c+1),l[s]=r(c);break}c=a.slice(c+1,d),l[s]=r(c),s=d}}}n.onopentag(o,l)}else">"===i[t]&&"<"!==i[t+1]&&(t++,i[t])&&n.ontext(i[t]);while(++t<i.length)}},n=0,i={};return{compile:function(t,r){function o(e){if(e){e=e.match(/'[^']+'|"[^"]+"|[\w$]+|[^\w$'"]+/g);for(var n="",i=0;i<e.length;i++)if(!(0<="_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e[i].charAt(0)))||u[e[i]]||i&&"."===e[i-1][e[i-1].length-1])if(0<=e[i].indexOf("$index")){for(var t=p;t>=0;t--)if(v[t]){n+=e[i].replace(/\$index/g,v[t]);break}}else n+=e[i];else n+="S."+e[i];return n}return e}function l(e,n){var i=n.indexOf("|");if(-1===i)return"'+("+o(n)+d+")+'";var t="|"===n[i+1]?n.match(/([^|]+(?:\|\|)?)+/g):n.split("|"),i=o(t[0]);if(t[1]){if(t=t[1].split(":"),i="F('"+t.shift().trim()+"')("+i,t.length){for(var r=[],l=0;l<t.length;l++)r.push(o(t[l]));i+=","+r.join(",")}i+=")"}return"'+("+i+d+")+'"}r=r||{};var a,s,f,c,d=r.loose?"||''":"",u={$index:1,undefined:1,$attr:1},p=0,g={},v={},h={},m="'use strict';var N=0,R='';",x=i[r.dotaRender]||n++,O={};i[x]=x,t=t.replace(/\s{2,}|\n/g," "),r.encode&&(t=t.replace(/"[^"]*"|'[^']*'/g,function(e){return e.replace(/[<>]/g,function(e){return{">":"&gt;","<":"&lt;"}[e]})})),e(t,{onopentag:function(e,n){var i,t={};if(n["dota-pass"]?(s=p,f=0):n["dota-continue"]&&(f=p),!s||f){if(n["ng-repeat"]){g[p]=g[p]?g[p]+1:1;var c="i"+p,d="l"+p,w=n["ng-repeat"].split(" in "),R=o(w[1]);v[p]=c,0<=w[0].indexOf(",")?(c=w[0].split(","),m+="var D"+p+"="+R+";",m+="for(var "+c[0]+" in D"+p+"){",m+="var "+c[1]+" = D"+p+"["+c[0]+"]; ",u[c[0]]=u[c[1]]=1):(m+="var D"+p+"="+R+","+c+"=-1,"+d+"=D"+p+".length;",m+="while(++"+c+"<"+d+"){",m+="var "+w[0]+"=D"+p+"["+c+"]; ",u[w[0]]=1),delete n["ng-repeat"]}r.diff&&(m+="N++; ",n.id=n.id||x+".'+N+'"),n["ng-if"]&&((n.wait||n.watch)&&(n.id=O[x+"."+p]=n.id||x+".'+N+'",m+=(a?"":"var T=this;T.W=[];")+'var W={I:"'+x+'."+ ++N,W:"'+n["ng-if"]+'"'+(n.wait?",O:1":"")+"};T.W.push(W);",h[p]=a=1,m+='W.F=function(S,F){var R="";',delete n.watch,delete n.wait),g[p]=g[p]?g[p]+1:1,m+="if("+o(n["ng-if"])+"){",delete n["ng-if"]),n["ng-class"]&&(m+="var s=[],n="+o(n["ng-class"])+";",m+="for(var c in n){n[c]&&s.push(c);}",i=1,delete n["ng-class"]);for(var b in n)"ng-"===b.substr(0,3)&&(R=b.substr(3),/^(?:src|alt|title|href)/.test(R)?(n[R]=n[b],delete n[b]):r.event&&0<=" click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste ".indexOf(" "+R+" ")&&(n.de="1",n["de-"+R]=n[b],delete n[b]))}for(b in n)if(c=n[b],i&&"class"===b)m+='s.push("'+c+'"); ';else{if(R=b,"id"!==b)if(0<=c.indexOf("{{")){for(c=c.split(/\{\{|\}\}/),d=0;d<c.length;d+=2)0<=c[d].indexOf("'")&&(c[d]=c[d].replace(/'/g,"\\'"));for(d=1;d<c.length-1;d+=2)c[d]=l(null,c[d]);c=c.join("")}else c=0<=c.indexOf("'")?c.replace(/'/g,"\\'"):c;if(t[R]='="'+c+'"',0<=t[b].indexOf("$index"))for(R=p;R>=0;R--)if(v[R]){t[b]=t[b].replace(/\$index/g,"'+"+v[R]+"+'");break}}m+="R+='<"+e+(i?" class=\"'+s.join(' ')+'\"":"");for(var y in t)m+=" "+y+t[y];if(m+=">';",n["dota-render"]&&n.expand){t=[];for(b in n)b.indexOf("data-")?b.indexOf("scope-")||t.push('"'+b.slice(6)+'":S["'+n[b]+'"]'):t.push('"'+b.slice(5)+'":"'+n[b]+'"');m+="var P={"+t.join(",")+'},U="'+n["dota-render"]+'";',m+="doTA.C[U]&&!doTA.D[U]&&(R+=doTA.C[U](S,F,P)); "}/^(?:input|img|br|hr)/i.test(e)?0<g[p]&&(m+="}",g[p]--,v[p]=0):p++},onclosetag:function(e){for(m+="R+='</"+e+">';",p--,h[p]&&(m+="} else {",m+="R+='<"+e+' id="'+O[x+"."+p]+'" style="display:none"></'+e+">'; ");0<g[p];)m+="}",g[p]--,v[p]=0;h[p]&&(m+="return R;}; ",m+="R+=W.F(S,F); ",h[p]=0),s&&s>=p&&(s=0)},ontext:function(e){0<=e.indexOf("{{")&&(e=e.replace(/\{\{([^}]+)\}\}/g,l)),m+=("R+='"+e+"';").replace(/\+''|''\+/g,"")},oncomment:function(e){m+="R+='<"+e.replace(/'/g,"\\'")+">';"}}),m+="return R;",m=m.replace(/;R\+=/g,"+").replace(/'\+'/g,""),r.optimize&&(m=m.replace(/\b([\w_-]+=)"([^"'\s]+)"(?=[\s>])/g,"$1$2")),r.debug&&console.log(m);try{c=new Function("S","F","$attr",m),a&&(c={W:[],F:c})}catch(w){throw"undefined"!=typeof console&&console.log("doTA compile error:"+m),w}return m=p=g=v=u=s=null,c},C:{},D:{}}}();if("undefined"!=typeof module&&module.exports)module.exports=doTA;else if("undefined"==typeof console){var noop=function(){};console={log:noop,time:noop,timeEnd:noop}}