var doTA=function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var e=" click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste ",n="_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=function(e,n){if(e){var t=e.match(/([<>]|[^<>]+)/g),o=0,r=function(e){return-1===e.indexOf("&")?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,'"')};do if("<"===t[o])if(o++,"/"===t[o][0])n.onclosetag(t[o].slice(1));else if("!"===t[o][0])n.oncomment(t[o]);else{var a,i={},c=t[o],l=c.indexOf(" ");if(-1===l)a=c;else{a=c.slice(0,l);for(var d=c.length;++l<d;){var s=c.indexOf("=",l);if(-1===s){i[c.slice(l)]="";break}var f,u,p=c.slice(l,s),h=c[s+1];if('"'===h||"'"===h)u=c.indexOf(h,s+2),f=c.slice(s+2,u),i[p]=r(f),l=u+1;else{if(u=c.indexOf(" ",s+2),-1===u){f=c.slice(s+1),i[p]=r(f);break}f=c.slice(s+1,u),i[p]=r(f),l=u}}}n.onopentag(a,i)}else">"===t[o]&&"<"!==t[o+1]&&(o++,t[o]&&n.ontext(t[o]));while(++o<t.length)}},o=0;return{compile:function(r,a){a=a||{};var i=a.loose?"||''":"";r=r.replace(/\s{2,}|\n/g," "),a.encode&&(r=r.replace(/"[^"]*"|'[^']*'/g,function(e){return e.replace(/[<>]/g,function(e){return{">":"&gt;","<":"&lt;"}[e]})}));var c,l,d,s,f=function(e,t){if(t){for(var o=t.match(/'[^']+'|"[^"]+"|[\w$]+|[^\w$'"]+/g),r="",a=0;a<o.length;a++)if(!(n.indexOf(o[a].charAt(0))>=0)||e[o[a]]||a&&"."===o[a-1][o[a-1].length-1])if(o[a].indexOf("$index")>=0){for(var i=v;i>=0;i--)if($[i]){r+=o[a].replace(/\$index/g,$[i]);break}}else r+=o[a];else r+="S."+o[a];return r}return t},u={$index:1,undefined:1,$attr:1},p=function(e){if(e.indexOf("{{")>=0){for(var n=e.split(/\{\{|\}\}/),t=0;t<n.length;t+=2)n[t].indexOf("'")>=0&&(n[t]=n[t].replace(/'/g,"\\'"));for(var t=1;t<n.length-1;t+=2)n[t]=m(null,n[t]);return n.join("")}return e.indexOf("'")>=0?e.replace(/'/g,"\\'"):e},h=function(e){return e.replace(/\{\{([^}]+)\}\}/g,m)},m=function(e,n){var t=n.indexOf("|");if(-1===t)return"'+("+f(u,n)+i+")+'";for(var o="|"===n[t+1]?n.match(/([^|]+(?:\|\|)?)+/g):n.split("|"),r=f(u,o[0]),a=1;a<o.length;a++){var c=o[a].split(":");if(r="F('"+c.shift().trim()+"')("+r,c.length){for(var l=[],d=0;d<c.length;d++)l.push(f(u,c[d]));r+=","+l.join(",")}r+=")";break}return"'+("+r+i+")+'"},v=0,g={},$={},w={},y="'use strict';var R='';";t(r,{onopentag:function(n,t){var r,i={};if(t["dota-pass"]?(l=v,d=0):t["dota-continue"]&&(d=v),!l||d){if(t["ng-repeat"]){g[v]=g[v]?g[v]+1:1;var s="i"+v,h="l"+v,m=t["ng-repeat"].split(" in "),x=f(u,m[1]);if($[v]=s,m[0].indexOf(",")>=0){var A=m[0].split(",");y+="var D"+v+"="+x+";",y+="for(var "+A[0]+" in D"+v+"){",y+="var "+A[1]+" = D"+v+"["+A[0]+"]; ",u[A[0]]=u[A[1]]=1}else y+="var D"+v+"="+x+","+s+"=-1,"+h+"=D"+v+".length;",y+="while(++"+s+"<"+h+"){",y+="var "+m[0]+"=D"+v+"["+s+"]; ",u[m[0]]=1;delete t["ng-repeat"]}t["ng-if"]&&((t.wait||t.watch)&&(++o,y+=(c?"":"var T=this;T.W=[];")+'var W={I:"D'+o+'",W:"'+t["ng-if"]+'"'+(t.wait?",O:1":"")+"};T.W.push(W);",w[v]=c=1,y+='W.F=function(S,F){"use strict";var R="";',t.id="D"+o,delete t.watch,delete t.wait),g[v]=g[v]?g[v]+1:1,y+="if("+f(u,t["ng-if"])+"){",delete t["ng-if"]),t["ng-class"]&&(y+="var s=[],n="+f(u,t["ng-class"])+";",y+="for(var c in n){n[c]&&s.push(c);}",r=1,delete t["ng-class"]);for(var D in t)if("ng-"===D.substr(0,3)){var O=D.substr(3);/^(?:src|alt|title|href)/.test(O)?(t[O]=t[D],delete t[D]):a.event&&e.indexOf(" "+O+" ")>=0&&(t.de="1",t["de-"+O]=t[D],delete t[D])}}for(var D in t){var C=t[D];if(r&&"class"===D)y+='s.push("'+C+'"); ';else if(i[D]='="'+p(C)+'"',i[D].indexOf("$index")>=0)for(var R=v;R>=0;R--)if($[R]){i[D]=i[D].replace(/\$index/g,"'+"+$[R]+"+'");break}}y+="R+='<"+n+(r?" class=\"'+s.join(' ')+'\"":"");for(var I in i)y+=" "+I+i[I];if(y+=">';",t["dota-render"]&&t.expand){var T=[];for(var D in t)D.indexOf("data-")?D.indexOf("scope-")||T.push('"'+D.slice(6)+'":S["'+t[D]+'"]'):T.push('"'+D.slice(5)+'":"'+t[D]+'"');y+="var P={"+T.join(",")+'},U="'+t["dota-render"]+'";',y+="doTA.C[U]&&!doTA.D[U]&&(R+=doTA.C[U](S,F,P)); "}/^(?:input|img|br|hr)/i.test(n)?g[v]>0&&(y+="}",g[v]--,$[v]=0):v++},onclosetag:function(e){for(y+="R+='</"+e+">';",v--,w[v]&&(y+="} else {",y+="R+='<"+e+' id="D'+o+'" style="display:none"></'+e+">'; ");g[v]>0;)y+="}",g[v]--,$[v]=0;w[v]&&(y+="return R;}; ",y+="R+=W.F(S,F); ",w[v]=0),l&&l>=v&&(l=0)},ontext:function(e){e.indexOf("{{")>=0&&(e=h(e)),y+=("R+='"+e+"';").replace(/\+''|''\+/g,"")},oncomment:function(e){y+="R+='<"+e.replace(/'/g,"\\'")+">';"}}),y+="return R;",y=y.replace(/;R\+=/g,"+").replace(/'\+'/g,""),a.optimize&&(y=y.replace(/\b([\w_-]+=)"([^"'\s]+)"(?=[\s>])/g,"$1$2")),a.debug&&console.log(y);try{s=Function("S","F","$attr",y),c&&(s={W:[],F:s})}catch(x){throw"undefined"!=typeof console&&console.log("doTA compile error:"+y),x}return y=v=g=$=u=l=null,s},C:{},D:{}}}();"undefined"!=typeof module&&module.exports?module.exports=doTA:"undefined"==typeof console&&(console={log:function(){}}),function(A){"use strict";function forEachArray(e,n,t){if(e.forEach)return e.forEach(n);for(var o=0,r=e.length;r>o;o++)o in e&&n.call(t,e[o],o);return e}var msie=document.documentMode,hiddenDIV;setTimeout(function(){document.getElementById&&(hiddenDIV=document.getElementById("dota-cache"),!hiddenDIV&&document.body&&(hiddenDIV=document.createElement("div"),hiddenDIV.id="dota-cache",hiddenDIV.style.display="none",document.body.appendChild(hiddenDIV)))});var B={0:0,"false":0};A.module("doTA",[]).config(["$provide",function(e){e.factory("doTA",function(){return doTA})}]).directive("dotaRender",["doTA","$http","$filter","$templateCache","$compile","$controller",function(d,h,f,t,c,r){return{restrict:"A",priority:1e3,terminal:!0,controller:A.noop,link:A.noop,compile:function(){return function(s,e,a){function cacheDOM(){s.$on("$destroy",function(){hiddenDIV&&(d.D[a.dotaRender]=e[0],hiddenDIV.appendChild(e[0]))})}function compile(e){a.debug;try{var n=d.compile(e,a)}catch(t){throw console.log("compile error",a,e),t}return a.dotaRender&&(d.C[a.dotaRender]=n),n}function render(func){if(func){try{var v=func.F?func.F(s,f,p):func(s,f,p)}catch(x){throw console.log("render error",func),x}a.debug,e[0].innerHTML=v}if((a.scope||a.ngController)&&(a.newScope&&a.newScope.$destroy(),a.newScope=s.$new(),a.ngController)){var l={$scope:a.newScope},ct=r(a.ngController,l);e.data("$ngControllerController",ct)}if(a.event&&forEachArray(e[0].querySelectorAll("[de]"),function(e){var n=e.attributes;e.addEventListener||(e.addEventListener=e.attachEvent);for(var t=0,o=n.length;o>t;t++)"de-"===n[t].name.substr(0,3)&&e.addEventListener(n[t].name.substr(3),function(e,n){return function(){(a.newScope||s).$applyAsync(n.value)}}(e,n[t]))}),a.compile?forEachArray(e[0].querySelectorAll("[dota-pass]"),function(e){c(e)(a.newScope||s)}):a.compileAll&&c(e.contents())(a.newScope||s),a.dotaOnload&&setTimeout(function(){eval(a.dotaOnload)}),a.dotaOnloadScope&&setTimeout(function(){s.$evalAsync(a.dotaOnloadScope)}),a.cacheDom&&cacheDOM(),a.loaded&&e.attr("loaded",!0),func&&func.W)for(var scopes={},watches={},i=0;i<func.W.length;i++){var w=func.W[i];watches[w.I]=s.$watch(w.W,function(e){return function(){var n=document.getElementById(e.I);if(!n)return console.log("tag not found");var t=e.F(s,f,p);if(!t)return console.log("no contents");var o=angular.element(t);scopes[e.I]&&scopes[e.I].$destroy(),scopes[e.I]=(a.newScope||s).$new(),(a.compile||a.compileAll)&&c(o)(scopes[e.I]),angular.element(n).replaceWith(o),e.O&&watches[e.I]()}}(w))}}function loader(n){if(d.C[a.dotaRender])!e[0].hasChildNodes()||a.inline||n?render(d.C[a.dotaRender]):render();else if(a.inline){var o=e[0].innerHTML;render(compile(o,a))}else a.dotaRender&&(e[0].hasChildNodes()?render():h.get(a.dotaRender,{cache:t}).success(function(e){render(compile(e,a))}))}a.loose=a.loose in B?B[a.loose]:a.loose||1,a.optimize=a.optimize in B?B[a.optimize]:a.optimize||1,a.event=a.event in B?B[a.event]:a.event||1,a.watch="string"==typeof a.watch?a.watch:0;var p={};if(a.cacheDom&&d.D[a.dotaRender]){var elem;return elem=msie?d.D[a.dotaRender].cloneNode(!0):d.D[a.dotaRender],void e[0].parentNode.replaceChild(elem,e[0])}for(var x in a.$attr){var z=a.$attr[x];z.indexOf("data-")?z.indexOf("scope-")||(p[z.slice(6)]=s[a[x]]):p[x]=a[x]}a.watch&&s.$watchCollection(a.watch,function(e,n){e!==n&&d.C[a.dotaRender]&&loader(!0)}),loader()}}}}]).directive("dotaInclude",["$http","$templateCache","$compile",function(e,n,t){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return function(o,r,a){e.get(a.dotaInclude,{cache:n}).success(function(e){r.html(e),"false"!==a.compile&&t(r.contents())(o)})}}}}]).directive("dotaTemplate",["$http","$templateCache","$compile",function(e,n,t){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return function(o,r,a){o.$watch(a.dotaTemplate,function(i){i&&e.get(i,{cache:n}).success(function(e){r.html(e),"false"!==a.compile&&t(r.contents())(o)})})}}}}]).factory("dotaHttp",["$compile","$http","$templateCache","$filter","doTA",function(e,n,t,o,r){return function(e,a,i,c){c=c||{},c.loose=1,r.C[e]?i(r.C[e](a,o)):n.get(e,{cache:t}).success(function(n){r.C[e]=r.compile(n,c),i(r.C[e](a,o))})}}])}(window.angular);