var doTA=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var e=function(e,n){if(e){var t=e.match(/([<>]|[^<>]+)/g),o=0,r=function(e){return-1===e.indexOf("&")?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,'"')};do if("<"===t[o])if(o++,"/"===t[o][0])n.onclosetag(t[o].slice(1));else if("!"===t[o][0])n.oncomment(t[o]);else{var i,c={},l=t[o],a=l.indexOf(" ");if(-1===a)i=l;else{i=l.slice(0,a);for(var d=l.length;++a<d;){var f=l.indexOf("=",a);if(-1===f){c[l.slice(a)]="";break}var a=l.slice(a,f),s=l[f+1];if('"'===s||"'"===s)s=l.indexOf(s,f+2),f=l.slice(f+2,s),c[a]=r(f),a=s+1;else{if(s=l.indexOf(" ",f+2),-1===s){f=l.slice(f+1),c[a]=r(f);break}f=l.slice(f+1,s),c[a]=r(f),a=s}}}n.onopentag(i,c)}else">"===t[o]&&"<"!==t[o+1]&&(o++,t[o])&&n.ontext(t[o]);while(++o<t.length)}},n=0,t={};return{compile:function(o,r){function i(e){if(e){e=e.match(/'[^']+'|"[^"]+"|[\w$]+|[^\w$'"]+/g);for(var n="",t=0;t<e.length;t++)if(!(0<="_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e[t].charAt(0)))||u[e[t]]||t&&"."===e[t-1][e[t-1].length-1])if(0<=e[t].indexOf("$index")){for(var o=p;o>=0;o--)if(g[o]){n+=e[t].replace(/\$index/g,g[o]);break}}else n+=e[t];else n+="S."+e[t];return n}return e}function c(e,n){var t=n.indexOf("|");if(-1===t)return"'+("+i(n)+s+")+'";var o="|"===n[t+1]?n.match(/([^|]+(?:\|\|)?)+/g):n.split("|"),t=i(o[0]);if(o[1]){if(o=o[1].split(":"),t="F('"+o.shift().trim()+"')("+t,o.length){for(var r=[],c=0;c<o.length;c++)r.push(i(o[c]));t+=","+r.join(",")}t+=")"}return"'+("+t+s+")+'"}r=r||{};var l,a,d,f,s=r.loose?"||''":"",u={$index:1,undefined:1,$attr:1},p=0,h={},g={},v={},m="'use strict';var N=0,R='';",$=t[r.dotaRender]||n++,y={};t[$]=$,o=o.replace(/\s{2,}|\n/g," "),r.encode&&(o=o.replace(/"[^"]*"|'[^']*'/g,function(e){return e.replace(/[<>]/g,function(e){return{">":"&gt;","<":"&lt;"}[e]})})),e(o,{onopentag:function(e,n){var t,o={};if(n["dota-pass"]?(a=p,d=0):n["dota-continue"]&&(d=p),!a||d){if(n["ng-repeat"]){h[p]=h[p]?h[p]+1:1;var f="i"+p,s="l"+p,x=n["ng-repeat"].split(" in "),w=i(x[1]);g[p]=f,0<=x[0].indexOf(",")?(f=x[0].split(","),m+="var D"+p+"="+w+";",m+="for(var "+f[0]+" in D"+p+"){",m+="var "+f[1]+" = D"+p+"["+f[0]+"]; ",u[f[0]]=u[f[1]]=1):(m+="var D"+p+"="+w+","+f+"=-1,"+s+"=D"+p+".length;",m+="while(++"+f+"<"+s+"){",m+="var "+x[0]+"=D"+p+"["+f+"]; ",u[x[0]]=1),delete n["ng-repeat"]}r.diff&&(m+="N++; ",n.id=n.id||$+".'+N+'"),n["ng-if"]&&((n.wait||n.watch)&&(n.id=y[$+"."+p]=n.id||$+".'+N+'",m+=(l?"":"var T=this;T.W=[];")+'var W={I:"'+$+'."+ ++N,W:"'+n["ng-if"]+'"'+(n.wait?",O:1":"")+"};T.W.push(W);",v[p]=l=1,m+='W.F=function(S,F){var R="";',delete n.watch,delete n.wait),h[p]=h[p]?h[p]+1:1,m+="if("+i(n["ng-if"])+"){",delete n["ng-if"]),n["ng-class"]&&(m+="var s=[],n="+i(n["ng-class"])+";",m+="for(var c in n){n[c]&&s.push(c);}",t=1,delete n["ng-class"]);for(var C in n)"ng-"===C.substr(0,3)&&(w=C.substr(3),/^(?:src|alt|title|href)/.test(w)?(n[w]=n[C],delete n[C]):r.event&&0<=" click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste ".indexOf(" "+w+" ")&&(n.de="1",n["de-"+w]=n[C],delete n[C]))}for(C in n)if(f=n[C],t&&"class"===C)m+='s.push("'+f+'"); ';else{if(w=C,"id"!==C)if(0<=f.indexOf("{{")){for(f=f.split(/\{\{|\}\}/),s=0;s<f.length;s+=2)0<=f[s].indexOf("'")&&(f[s]=f[s].replace(/'/g,"\\'"));for(s=1;s<f.length-1;s+=2)f[s]=c(null,f[s]);f=f.join("")}else f=0<=f.indexOf("'")?f.replace(/'/g,"\\'"):f;if(o[w]='="'+f+'"',0<=o[C].indexOf("$index"))for(w=p;w>=0;w--)if(g[w]){o[C]=o[C].replace(/\$index/g,"'+"+g[w]+"+'");break}}m+="R+='<"+e+(t?" class=\"'+s.join(' ')+'\"":"");for(var O in o)m+=" "+O+o[O];if(m+=">';",n["dota-render"]&&n.expand){o=[];for(C in n)C.indexOf("data-")?C.indexOf("scope-")||o.push('"'+C.slice(6)+'":S["'+n[C]+'"]'):o.push('"'+C.slice(5)+'":"'+n[C]+'"');m+="var P={"+o.join(",")+'},U="'+n["dota-render"]+'";',m+="doTA.C[U]&&!doTA.D[U]&&(R+=doTA.C[U](S,F,P)); "}/^(?:input|img|br|hr)/i.test(e)?0<h[p]&&(m+="}",h[p]--,g[p]=0):p++},onclosetag:function(e){for(m+="R+='</"+e+">';",p--,v[p]&&(m+="} else {",m+="R+='<"+e+' id="'+y[$+"."+p]+'" style="display:none"></'+e+">'; ");0<h[p];)m+="}",h[p]--,g[p]=0;v[p]&&(m+="return R;}; ",m+="R+=W.F(S,F); ",v[p]=0),a&&a>=p&&(a=0)},ontext:function(e){0<=e.indexOf("{{")&&(e=e.replace(/\{\{([^}]+)\}\}/g,c)),m+=("R+='"+e+"';").replace(/\+''|''\+/g,"")},oncomment:function(e){m+="R+='<"+e.replace(/'/g,"\\'")+">';"}}),m+="return R;",m=m.replace(/;R\+=/g,"+").replace(/'\+'/g,""),r.optimize&&(m=m.replace(/\b([\w_-]+=)"([^"'\s]+)"(?=[\s>])/g,"$1$2")),r.debug&&console.log(m);try{f=new Function("S","F","$attr",m),l&&(f={W:[],F:f})}catch(x){throw"undefined"!=typeof console&&console.log("doTA compile error:"+m),x}return m=p=h=g=u=a=null,f},C:{},D:{}}}();if("undefined"!=typeof module&&module.exports)module.exports=doTA;else if("undefined"==typeof console){var noop=function(){};console={log:noop,time:noop,timeEnd:noop}}!function(C,x){function D(e,n,t){if(e.forEach)return e.forEach(n);for(var o=0,r=e.length;r>o;o++)o in e&&n.call(t,e[o],o);return e}var u=x.documentMode,n;setTimeout(function(){x.getElementById&&(n=x.getElementById("dota-cache"),!n&&x.body&&(n=x.createElement("div"),n.id="dota-cache",n.style.display="none",x.body.appendChild(n)))});var k={0:0,"false":0};C.module("doTA",[]).config(["$provide",function(e){e.factory("doTA",function(){return doTA})}]).directive("dotaRender",["doTA","$http","$filter","$templateCache","$compile","$controller",function(d,l,w,a,e,m){return{restrict:"A",priority:1e3,terminal:!0,controller:C.noop,link:C.noop,compile:function(){var A,g;return function(p,v,h){function b(){p.$on("$destroy",function(){n&&(d.D[c]=v[0],n.appendChild(v[0]))})}function z(e){try{var n=d.compile(e,h)}catch(t){throw console.log("compile error",h,e),t}return c&&(d.C[c]=n),n}function B(a){if((O||H)&&(A&&g.$destroy(),g=p.$new(),A=1,H)){var c=m(H,{$scope:g});v.data("$ngControllerController",c)}if(a){try{var d=a.F?a.F(g,w,E):a(g,w,E)}catch(f){throw console.log("render error",a),f}v[0].innerHTML=d}if(y&&D(v[0].querySelectorAll("[de]"),function(e){var n=e.attributes;e.addEventListener||(e.addEventListener=e.attachEvent);for(var t=0,o=n.length;o>t;t++)"de-"===n[t].name.substr(0,3)&&e.addEventListener(n[t].name.substr(3),function(e,n){return function(e){g.$applyAsync(n.value)}}(e,n[t]))}),q?D(v[0].querySelectorAll("[dota-pass]"),function(n){e(n)(g)}):J&&e(v.contents())(g),K&&setTimeout(function(){eval(K)}),L&&setTimeout(function(){g.$evalAsync(L)}),I&&b(),P&&v.attr("loaded",!0),a&&a.W)for(var h={},l={},c=0;c<a.W.length;c++)d=a.W[c],l[d.I]=g.$watch(d.W,function(n){return function(t,o){var r=x.getElementById(n.I);if(!r)return console.log("tag not found");var i=n.F(g,w,E);return i?(i=C.element(i),h[n.I]&&h[n.I].$destroy(),h[n.I]=g.$new(),(q||J)&&e(i)(h[n.I]),C.element(r).replaceWith(i),void(n.O&&l[n.I]())):console.log("no contents")}}(d))}function F(e){d.C[c]?!v[0].hasChildNodes()||M||e?B(d.C[c]):B():M?B(z(v[0].innerHTML,h)):c&&(v[0].hasChildNodes()?B():l.get(c,{cache:a}).success(function(e){B(z(e,h))}))}g=p;var I=h.cacheDom,c=h.dotaRender,O=h.scope,H=h.ngController,f=h.loose,t=h.optimize,y=h.event,r=h.watch,q=h.compile,J=h.compileAll,K=h.dotaOnload,L=h.dotaOnloadScope,P=h.loaded,M=h.inline,N=h.$attr,f=h.loose=f in k?k[f]:f||1,t=h.optimize=t in k?k[t]:t||1,y=h.event=y in k?k[y]:y||1,r=h.watch="string"==typeof r?r:0,E={};if(I&&d.D[c])r=u?d.D[c].cloneNode(!0):d.D[c],v[0].parentNode.replaceChild(r,v[0]);else{for(var G in N)f=N[G],f.indexOf("data-")?f.indexOf("scope-")||(E[f.slice(6)]=g[h[G]]):E[G]=h[G];r&&g.$watchCollection(r,function(e,n){e!==n&&d.C[c]&&F(!0)}),F()}}}}}]).directive("dotaInclude",["$http","$templateCache","$compile",function(e,n,t){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return function(o,r,i){e.get(i.dotaInclude,{cache:n}).success(function(e){r.html(e),"false"!==i.compile&&t(r.contents())(o)})}}}}]).directive("dotaTemplate",["$http","$templateCache","$compile",function(e,n,t){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return function(o,r,i){o.$watch(i.dotaTemplate,function(c,l){c&&e.get(c,{cache:n}).success(function(e){r.html(e),"false"!==i.compile&&t(r.contents())(o)})})}}}}]).factory("dotaHttp",["$compile","$http","$templateCache","$filter","doTA",function(e,n,t,o,r){return function(e,i,c,l){l=l||{},l.loose=1,r.C[e]?c(r.C[e](i,o)):n.get(e,{cache:t}).success(function(n){r.C[e]=r.compile(n,l),c(r.C[e](i,o))})}}])}(window.angular,window.document);