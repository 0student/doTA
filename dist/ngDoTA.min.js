var doTA=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var e=function(e,n){if(e){var t=e.match(/([<>]|[^<>]+)/g),o=0,r=function(e){return-1===e.indexOf("&")?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,'"')};do if("<"===t[o])if(o++,"/"===t[o][0])n.onclosetag(t[o].slice(1));else if("!"===t[o][0])n.oncomment(t[o]);else{var i,a={},c=t[o],l=c.indexOf(" ");if(-1===l)i=c;else{i=c.slice(0,l);for(var f=c.length;++l<f;){var d=c.indexOf("=",l);if(-1===d){a[c.slice(l)]="";break}var l=c.slice(l,d),s=c[d+1];if('"'===s||"'"===s)s=c.indexOf(s,d+2),d=c.slice(d+2,s),a[l]=r(d),l=s+1;else{if(s=c.indexOf(" ",d+2),-1===s){d=c.slice(d+1),a[l]=r(d);break}d=c.slice(d+1,s),a[l]=r(d),l=s}}}n.onopentag(i,a)}else">"===t[o]&&"<"!==t[o+1]&&(o++,t[o])&&n.ontext(t[o]);while(++o<t.length)}},n=0;return{compile:function(t,o){function r(e){if(e){e=e.match(/'[^']+'|"[^"]+"|[\w$]+|[^\w$'"]+/g);for(var n="",t=0;t<e.length;t++)if(!(0<="_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e[t].charAt(0)))||s[e[t]]||t&&"."===e[t-1][e[t-1].length-1])if(0<=e[t].indexOf("$index")){for(var o=u;o>=0;o--)if(g[o]){n+=e[t].replace(/\$index/g,g[o]);break}}else n+=e[t];else n+="S."+e[t];return n}return e}function i(e,n){var t=n.indexOf("|");if(-1===t)return"'+("+r(n)+d+")+'";var o="|"===n[t+1]?n.match(/([^|]+(?:\|\|)?)+/g):n.split("|"),t=r(o[0]);if(o[1]){if(o=o[1].split(":"),t="F('"+o.shift().trim()+"')("+t,o.length){for(var i=[],a=0;a<o.length;a++)i.push(r(o[a]));t+=","+i.join(",")}t+=")"}return"'+("+t+d+")+'"}o=o||{};var a,c,l,f,d=o.loose?"||''":"",s={$index:1,undefined:1,$attr:1},u=0,p={},g={},h={},m="'use strict';var R='';";t=t.replace(/\s{2,}|\n/g," "),o.encode&&(t=t.replace(/"[^"]*"|'[^']*'/g,function(e){return e.replace(/[<>]/g,function(e){return{">":"&gt;","<":"&lt;"}[e]})})),e(t,{onopentag:function(e,t){var f,d={};if(t["dota-pass"]?(c=u,l=0):t["dota-continue"]&&(l=u),!c||l){if(t["ng-repeat"]){p[u]=p[u]?p[u]+1:1;var v="i"+u,$="l"+u,y=t["ng-repeat"].split(" in "),x=r(y[1]);g[u]=v,0<=y[0].indexOf(",")?(v=y[0].split(","),m+="var D"+u+"="+x+";",m+="for(var "+v[0]+" in D"+u+"){",m+="var "+v[1]+" = D"+u+"["+v[0]+"]; ",s[v[0]]=s[v[1]]=1):(m+="var D"+u+"="+x+","+v+"=-1,"+$+"=D"+u+".length;",m+="while(++"+v+"<"+$+"){",m+="var "+y[0]+"=D"+u+"["+v+"]; ",s[y[0]]=1),delete t["ng-repeat"]}t["ng-if"]&&((t.wait||t.watch)&&(++n,m+=(a?"":"var T=this;T.W=[];")+'var W={I:"D'+n+'",W:"'+t["ng-if"]+'"'+(t.wait?",O:1":"")+"};T.W.push(W);",h[u]=a=1,m+='W.F=function(S,F){"use strict";var R="";',t.id="D"+n,delete t.watch,delete t.wait),p[u]=p[u]?p[u]+1:1,m+="if("+r(t["ng-if"])+"){",delete t["ng-if"]),t["ng-class"]&&(m+="var s=[],n="+r(t["ng-class"])+";",m+="for(var c in n){n[c]&&s.push(c);}",f=1,delete t["ng-class"]);for(var C in t)"ng-"===C.substr(0,3)&&(x=C.substr(3),/^(?:src|alt|title|href)/.test(x)?(t[x]=t[C],delete t[C]):o.event&&0<=" click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste ".indexOf(" "+x+" ")&&(t.de="1",t["de-"+x]=t[C],delete t[C]))}for(C in t)if(v=t[C],f&&"class"===C)m+='s.push("'+v+'"); ';else{if(x=C,0<=v.indexOf("{{")){for(v=v.split(/\{\{|\}\}/),$=0;$<v.length;$+=2)0<=v[$].indexOf("'")&&(v[$]=v[$].replace(/'/g,"\\'"));for($=1;$<v.length-1;$+=2)v[$]=i(null,v[$]);v=v.join("")}else v=0<=v.indexOf("'")?v.replace(/'/g,"\\'"):v;if(d[x]='="'+v+'"',0<=d[C].indexOf("$index"))for(x=u;x>=0;x--)if(g[x]){d[C]=d[C].replace(/\$index/g,"'+"+g[x]+"+'");break}}m+="R+='<"+e+(f?" class=\"'+s.join(' ')+'\"":"");for(var w in d)m+=" "+w+d[w];if(m+=">';",t["dota-render"]&&t.expand){d=[];for(C in t)C.indexOf("data-")?C.indexOf("scope-")||d.push('"'+C.slice(6)+'":S["'+t[C]+'"]'):d.push('"'+C.slice(5)+'":"'+t[C]+'"');m+="var P={"+d.join(",")+'},U="'+t["dota-render"]+'";',m+="doTA.C[U]&&!doTA.D[U]&&(R+=doTA.C[U](S,F,P)); "}/^(?:input|img|br|hr)/i.test(e)?0<p[u]&&(m+="}",p[u]--,g[u]=0):u++},onclosetag:function(e){for(m+="R+='</"+e+">';",u--,h[u]&&(m+="} else {",m+="R+='<"+e+' id="D'+n+'" style="display:none"></'+e+">'; ");0<p[u];)m+="}",p[u]--,g[u]=0;h[u]&&(m+="return R;}; ",m+="R+=W.F(S,F); ",h[u]=0),c&&c>=u&&(c=0)},ontext:function(e){0<=e.indexOf("{{")&&(e=e.replace(/\{\{([^}]+)\}\}/g,i)),m+=("R+='"+e+"';").replace(/\+''|''\+/g,"")},oncomment:function(e){m+="R+='<"+e.replace(/'/g,"\\'")+">';"}}),m+="return R;",m=m.replace(/;R\+=/g,"+").replace(/'\+'/g,""),o.optimize&&(m=m.replace(/\b([\w_-]+=)"([^"'\s]+)"(?=[\s>])/g,"$1$2")),o.debug&&console.log(m);try{f=new Function("S","F","$attr",m),a&&(f={W:[],F:f})}catch(v){throw"undefined"!=typeof console&&console.log("doTA compile error:"+m),v}return m=u=p=g=s=c=null,f},C:{},D:{}}}();"undefined"!=typeof module&&module.exports?module.exports=doTA:"undefined"==typeof console&&(console={log:function(){}}),function(B,r){function w(e,n,t){if(e.forEach)return e.forEach(n);for(var o=0,r=e.length;r>o;o++)o in e&&n.call(t,e[o],o);return e}var u=r.documentMode,h;setTimeout(function(){r.getElementById&&(h=r.getElementById("dota-cache"),!h&&r.body&&(h=r.createElement("div"),h.id="dota-cache",h.style.display="none",r.body.appendChild(h)))});var m={0:0,"false":0};B.module("doTA",[]).config(["$provide",function(e){e.factory("doTA",function(){return doTA})}]).directive("dotaRender",["doTA","$http","$filter","$templateCache","$compile","$controller",function(e,v,b,c,k,y){return{restrict:"A",priority:1e3,terminal:!0,controller:B.noop,link:B.noop,compile:function(){var p,g;return function(A,l,a){function F(){A.$on("$destroy",function(){h&&(e.D[f]=l[0],h.appendChild(l[0]))})}function G(n){try{var t=e.compile(n,a)}catch(o){throw console.log("compile error",a,n),o}return f&&(e.C[f]=t),t}function d(a){if((t||x)&&(p&&g.$destroy(),g=A.$new(),p=1,x)){var c=y(x,{$scope:g});l.data("$ngControllerController",c)}if(a){try{var d=a.F?a.F(g,b,D):a(g,b,D)}catch(f){throw console.log("render error",a),f}l[0].innerHTML=d}if(z&&w(l[0].querySelectorAll("[de]"),function(e){var n=e.attributes;e.addEventListener||(e.addEventListener=e.attachEvent);for(var t=0,o=n.length;o>t;t++)"de-"===n[t].name.substr(0,3)&&e.addEventListener(n[t].name.substr(3),function(e,n){return function(e){g.$applyAsync(n.value)}}(e,n[t]))}),J?w(l[0].querySelectorAll("[dota-pass]"),function(e){k(e)(g)}):K&&k(l.contents())(g),L&&setTimeout(function(){eval(L)}),M&&setTimeout(function(){g.$evalAsync(M)}),I&&F(),P&&l.attr("loaded",!0),a&&a.W)for(var e={},h={},c=0;c<a.W.length;c++)d=a.W[c],h[d.I]=g.$watch(d.W,function(n){return function(t,o){var i=r.getElementById(n.I);if(!i)return console.log("tag not found");var a=n.F(g,b,D);return a?(a=B.element(a),e[n.I]&&e[n.I].$destroy(),e[n.I]=g.$new(),(J||K)&&k(a)(e[n.I]),B.element(i).replaceWith(a),void(n.O&&h[n.I]())):console.log("no contents")}}(d))}function H(n){e.C[f]?!l[0].hasChildNodes()||N||n?d(e.C[f]):d():N?d(G(l[0].innerHTML,a)):f&&(l[0].hasChildNodes()?d():v.get(f,{cache:c}).success(function(e){d(G(e,a))}))}g=A;var I=a.cacheDom,f=a.dotaRender,t=a.scope,x=a.ngController,q=a.loose,n=a.optimize,z=a.event,C=a.watch,J=a.compile,K=a.compileAll,L=a.dotaOnload,M=a.dotaOnloadScope,P=a.loaded,N=a.inline,O=a.$attr,q=a.loose=q in m?m[q]:q||1,n=a.optimize=n in m?m[n]:n||1,z=a.event=z in m?m[z]:z||1,C=a.watch="string"==typeof C?C:0,D={};if(I&&e.D[f])C=u?e.D[f].cloneNode(!0):e.D[f],l[0].parentNode.replaceChild(C,l[0]);else{for(var E in O)q=O[E],q.indexOf("data-")?q.indexOf("scope-")||(D[q.slice(6)]=g[a[E]]):D[E]=a[E];C&&g.$watchCollection(C,function(n,t){n!==t&&e.C[f]&&H(!0)}),H()}}}}}]).directive("dotaInclude",["$http","$templateCache","$compile",function(e,n,t){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return function(o,r,i){e.get(i.dotaInclude,{cache:n}).success(function(e){r.html(e),"false"!==i.compile&&t(r.contents())(o)})}}}}]).directive("dotaTemplate",["$http","$templateCache","$compile",function(e,n,t){return{restrict:"A",priority:1e3,terminal:!0,compile:function(){return function(o,r,i){o.$watch(i.dotaTemplate,function(a,c){a&&e.get(a,{cache:n}).success(function(e){r.html(e),"false"!==i.compile&&t(r.contents())(o)})})}}}}]).factory("dotaHttp",["$compile","$http","$templateCache","$filter","doTA",function(e,n,t,o,r){return function(e,i,a,c){c=c||{},c.loose=1,r.C[e]?a(r.C[e](i,o)):n.get(e,{cache:t}).success(function(n){r.C[e]=r.compile(n,c),a(r.C[e](i,o))})}}])}(window.angular,window.document);